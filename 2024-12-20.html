<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Scorecard - December 20, 2024</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1080px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .nav {
            margin-bottom: 20px;
        }
        .nav a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        .nav a:hover {
            text-decoration: underline;
        }
        .scorecard-summary {
            display: flex;
            gap: 30px;
            margin: 20px 0;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 8px;
        }
        .scorecard-section {
            flex: 1;
            text-align: center;
        }
        .score-value {
            font-size: 36px;
            font-weight: bold;
            margin: 10px 0;
        }
        .v1-score { color: #3498db; }
        .v2-score { color: #9b59b6; }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .component {
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #bdc3c7;
            background: #f8f9fa;
        }
        .component-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .component-name {
            font-weight: 600;
            color: #2c3e50;
        }
        .component-name a {
            color: #3498db;
            text-decoration: none;
        }
        .component-name a:hover {
            text-decoration: underline;
        }
        .component-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .component-status.pass {
            background: #d5f4e6;
            color: #27ae60;
        }
        .component-status.fail {
            background: #fadbd8;
            color: #e74c3c;
        }
        .component-details {
            font-size: 14px;
            color: #7f8c8d;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .metric-name {
            font-weight: 500;
        }
        .metric-name a {
            color: #3498db;
            text-decoration: none;
        }
        .metric-name a:hover {
            text-decoration: underline;
        }
        .metric-value {
            font-weight: bold;
            color: #2980b9;
        }
        .charts-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .chart-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: #1a1a1a;
        }
        .chart-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        .chart-root {
            position: relative;
            width: 100%;
            height: 640px;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 12px;
            text-align: center;
        }
        
        /* KPI Explanations Enhanced Styling */
        .explanations-section {
            margin-top: 40px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
        }
        
        .explanations-intro {
            font-style: italic;
            color: #6c757d;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.5;
            padding: 15px;
            background: #e9ecef;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }
        
        .explanation-category {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .explanation-category:last-child {
            border-bottom: none;
        }
        
        .explanation-category h3 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #495057;
            border-bottom: 1px solid #ced4da;
            padding-bottom: 8px;
        }
        
        .explanation-item {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .explanation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f8f9fa;
        }
        
        .explanation-header h4 {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
            flex: 1;
        }
        
        .explanation-score {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .explanation-score.pass {
            background: #d5f4e6;
            color: #27ae60;
            border: 2px solid #27ae60;
        }
        
        .explanation-score.fail {
            background: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        
        .metric-current-value {
            background: #e3f2fd;
            color: #1976d2;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            border: 2px solid #1976d2;
        }
        
        .explanation-description {
            font-size: 16px;
            color: #495057;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .component-current-values {
            background: #fff3cd;
            color: #856404;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #ffeaa7;
            font-size: 14px;
        }
        
        .component-current-values strong {
            color: #6c5ce7;
            font-weight: 600;
        }
        
        .explanation-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border-left: 4px solid #17a2b8;
        }
        
        .explanation-section {
            margin-bottom: 18px;
        }
        
        .explanation-section:last-child {
            margin-bottom: 0;
        }
        
        .explanation-section strong {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #343a40;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .explanation-section p {
            margin: 0;
            color: #6c757d;
            line-height: 1.5;
        }
        
        .explanation-section ul {
            margin: 0;
            padding-left: 20px;
            color: #6c757d;
        }
        
        .explanation-section li {
            margin-bottom: 6px;
            line-height: 1.5;
        }
        
        .metric-explanation {
            border-left: 4px solid #9b59b6;
        }
        
        .metric-explanation .explanation-details {
            border-left-color: #9b59b6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="2024-12-23.html">‚Üê Dec 23</a> | <a href="index.html">‚Üê Back to Home</a> | <a href="2024-12-19.html">Dec 19 ‚Üí</a>
        </div>
        <h1>Macro Scorecard - December 20, 2024</h1>
        <div class="scorecard-summary">
            <div class="scorecard-section">
                <h3>V1 Scorecard (Original)</h3>
                <div class="score-value v1-score">0/6</div>
            </div>
            <div class="scorecard-section">
                <h3>V2 Scorecard (New)</h3>
                <div class="score-value v2-score">0/9</div>
            </div>
        </div>
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">SPY Chart</div>
                <div id="spy-chart" class="chart-root"></div>
            </div>
            <div class="chart-container">
                <div class="chart-title">QQQ Chart</div>
                <div id="qqq-chart" class="chart-root"></div>
            </div>
        </div>
        <div class="section">
            <h2>V1 Components</h2>
            
        </div>
        <div class="section">
            <h2>V2 Components</h2>
            
        </div>
        <div class="section">
            <h2>Aggregate Metrics</h2>
            
        </div>
        
        <div class="section explanations-section">
            <h2>üìä KPI & Metrics Explanations</h2>
            <p class="explanations-intro">
                This section provides detailed explanations of all Key Performance Indicators (KPIs) and metrics used in the Macro Scorecard analysis. 
                Understanding these components helps interpret the market health assessment and scoring methodology.
            </p>
        
            <div class="explanation-category">
                <h3>üîµ V1 Scorecard Components (Original)</h3>
        </div>
            <div class="explanation-category">
                <h3>üü£ V2 Scorecard Components (New)</h3>
        </div>
            <div class="explanation-category">
                <h3>üìà Aggregate Metrics</h3>
        </div></div>
        <div class="footer">
            Generated on 2025-11-27 19:41 UTC
        </div>
    </div>
    <script>
        // Chart data
        const spyData = {"symbol": "SPY", "data": [{"date": "2024-09-24", "open": 570.48, "high": 571.36, "low": 567.6, "close": 571.3, "volume": 46805672, "ema_8": 566.0, "ema_21": 559.95, "sma_50": 550.98, "bb_upper": 575.82, "bb_middle": 558.66, "bb_lower": 541.49}, {"date": "2024-09-25", "open": 571.14, "high": 571.89, "low": 568.91, "close": 570.04, "volume": 38428587, "ema_8": 566.9, "ema_21": 560.86, "sma_50": 551.08, "bb_upper": 576.95, "bb_middle": 559.08, "bb_lower": 541.21}, {"date": "2024-09-26", "open": 574.38, "high": 574.71, "low": 569.9, "close": 572.3, "volume": 48336004, "ema_8": 568.1, "ema_21": 561.9, "sma_50": 551.39, "bb_upper": 578.59, "bb_middle": 559.78, "bb_lower": 540.97}, {"date": "2024-09-27", "open": 573.39, "high": 574.22, "low": 570.42, "close": 571.47, "volume": 42100928, "ema_8": 568.85, "ema_21": 562.77, "sma_50": 551.76, "bb_upper": 579.94, "bb_middle": 560.44, "bb_lower": 540.93}, {"date": "2024-09-30", "open": 570.42, "high": 574.38, "low": 568.08, "close": 573.76, "volume": 63655448, "ema_8": 569.94, "ema_21": 563.77, "sma_50": 552.26, "bb_upper": 581.3, "bb_middle": 560.94, "bb_lower": 540.58}, {"date": "2024-10-01", "open": 573.4, "high": 574.06, "low": 566.0, "close": 568.62, "volume": 72668778, "ema_8": 569.65, "ema_21": 564.21, "sma_50": 552.54, "bb_upper": 581.96, "bb_middle": 561.77, "bb_lower": 541.58}, {"date": "2024-10-02", "open": 567.71, "high": 569.9, "low": 565.27, "close": 568.86, "volume": 38097798, "ema_8": 569.47, "ema_21": 564.64, "sma_50": 552.84, "bb_upper": 582.42, "bb_middle": 562.66, "bb_lower": 542.91}, {"date": "2024-10-03", "open": 567.36, "high": 569.8, "low": 565.49, "close": 567.82, "volume": 40846466, "ema_8": 569.1, "ema_21": 564.93, "sma_50": 553.37, "bb_upper": 582.45, "bb_middle": 563.57, "bb_lower": 544.69}, {"date": "2024-10-04", "open": 572.35, "high": 573.36, "low": 568.1, "close": 572.98, "volume": 43005186, "ema_8": 569.97, "ema_21": 565.66, "sma_50": 554.06, "bb_upper": 581.03, "bb_middle": 565.2, "bb_lower": 549.38}, {"date": "2024-10-07", "open": 571.3, "high": 571.96, "low": 566.63, "close": 567.8, "volume": 49964690, "ema_8": 569.48, "ema_21": 565.85, "sma_50": 554.53, "bb_upper": 579.41, "bb_middle": 566.27, "bb_lower": 553.13}, {"date": "2024-10-08", "open": 570.42, "high": 573.78, "low": 569.53, "close": 573.17, "volume": 37398693, "ema_8": 570.3, "ema_21": 566.52, "sma_50": 555.1, "bb_upper": 578.08, "bb_middle": 567.49, "bb_lower": 556.91}, {"date": "2024-10-09", "open": 573.16, "high": 577.71, "low": 572.55, "close": 577.14, "volume": 37912244, "ema_8": 571.82, "ema_21": 567.48, "sma_50": 555.8, "bb_upper": 578.13, "bb_middle": 568.63, "bb_lower": 559.13}, {"date": "2024-10-10", "open": 575.77, "high": 577.58, "low": 574.49, "close": 576.13, "volume": 44138060, "ema_8": 572.78, "ema_21": 568.27, "sma_50": 556.31, "bb_upper": 578.42, "bb_middle": 569.48, "bb_lower": 560.54}, {"date": "2024-10-11", "open": 576.05, "high": 580.33, "low": 575.91, "close": 579.58, "volume": 42267994, "ema_8": 574.29, "ema_21": 569.3, "sma_50": 557.04, "bb_upper": 579.65, "bb_middle": 570.36, "bb_lower": 561.07}, {"date": "2024-10-14", "open": 581.22, "high": 585.27, "low": 580.73, "close": 584.32, "volume": 36217215, "ema_8": 576.52, "ema_21": 570.66, "sma_50": 558.07, "bb_upper": 581.95, "bb_middle": 571.43, "bb_lower": 560.92}, {"date": "2024-10-15", "open": 584.59, "high": 584.9, "low": 578.54, "close": 579.78, "volume": 54203636, "ema_8": 577.24, "ema_21": 571.49, "sma_50": 559.32, "bb_upper": 582.64, "bb_middle": 572.27, "bb_lower": 561.89}, {"date": "2024-10-16", "open": 579.78, "high": 582.83, "low": 578.96, "close": 582.3, "volume": 30725436, "ema_8": 578.37, "ema_21": 572.47, "sma_50": 560.52, "bb_upper": 583.28, "bb_middle": 573.31, "bb_lower": 563.35}, {"date": "2024-10-17", "open": 585.91, "high": 586.12, "low": 582.16, "close": 582.35, "volume": 34393714, "ema_8": 579.25, "ema_21": 573.37, "sma_50": 561.79, "bb_upper": 584.56, "bb_middle": 573.88, "bb_lower": 563.2}, {"date": "2024-10-18", "open": 584.07, "high": 585.39, "low": 582.58, "close": 584.59, "volume": 37416801, "ema_8": 580.44, "ema_21": 574.39, "sma_50": 562.87, "bb_upper": 586.04, "bb_middle": 574.7, "bb_lower": 563.36}, {"date": "2024-10-21", "open": 583.85, "high": 584.85, "low": 580.6, "close": 583.63, "volume": 36439010, "ema_8": 581.15, "ema_21": 575.23, "sma_50": 563.89, "bb_upper": 587.15, "bb_middle": 575.4, "bb_lower": 563.65}, {"date": "2024-10-22", "open": 581.05, "high": 584.5, "low": 580.38, "close": 583.32, "volume": 34183835, "ema_8": 581.63, "ema_21": 575.97, "sma_50": 564.89, "bb_upper": 588.09, "bb_middle": 576.0, "bb_lower": 563.9}, {"date": "2024-10-23", "open": 581.26, "high": 581.71, "low": 574.41, "close": 577.99, "volume": 49314574, "ema_8": 580.82, "ema_21": 576.15, "sma_50": 565.61, "bb_upper": 588.18, "bb_middle": 576.4, "bb_lower": 564.61}, {"date": "2024-10-24", "open": 579.98, "high": 580.06, "low": 576.57, "close": 579.24, "volume": 34979860, "ema_8": 580.47, "ema_21": 576.43, "sma_50": 566.32, "bb_upper": 588.43, "bb_middle": 576.74, "bb_lower": 565.05}, {"date": "2024-10-25", "open": 581.51, "high": 584.46, "low": 578.08, "close": 579.04, "volume": 47268176, "ema_8": 580.15, "ema_21": 576.67, "sma_50": 566.83, "bb_upper": 588.58, "bb_middle": 577.12, "bb_lower": 565.66}, {"date": "2024-10-28", "open": 582.58, "high": 582.71, "low": 580.52, "close": 580.83, "volume": 30174704, "ema_8": 580.3, "ema_21": 577.05, "sma_50": 567.37, "bb_upper": 588.93, "bb_middle": 577.47, "bb_lower": 566.02}, {"date": "2024-10-29", "open": 579.85, "high": 582.91, "low": 578.43, "close": 581.77, "volume": 42899661, "ema_8": 580.63, "ema_21": 577.48, "sma_50": 567.81, "bb_upper": 588.94, "bb_middle": 578.13, "bb_lower": 567.32}, {"date": "2024-10-30", "open": 581.29, "high": 583.32, "low": 579.29, "close": 580.01, "volume": 41435839, "ema_8": 580.49, "ema_21": 577.71, "sma_50": 568.23, "bb_upper": 588.6, "bb_middle": 578.69, "bb_lower": 568.78}, {"date": "2024-10-31", "open": 575.56, "high": 575.63, "low": 568.44, "close": 568.64, "volume": 60182451, "ema_8": 577.86, "ema_21": 576.88, "sma_50": 568.39, "bb_upper": 588.45, "bb_middle": 578.73, "bb_lower": 569.01}, {"date": "2024-11-01", "open": 571.32, "high": 575.55, "low": 570.62, "close": 571.04, "volume": 45667533, "ema_8": 576.34, "ema_21": 576.35, "sma_50": 568.69, "bb_upper": 588.63, "bb_middle": 578.63, "bb_lower": 568.63}, {"date": "2024-11-04", "open": 571.18, "high": 572.5, "low": 567.89, "close": 569.81, "volume": 38216975, "ema_8": 574.89, "ema_21": 575.76, "sma_50": 568.84, "bb_upper": 588.31, "bb_middle": 578.73, "bb_lower": 569.16}, {"date": "2024-11-05", "open": 570.74, "high": 576.74, "low": 570.52, "close": 576.7, "volume": 39478322, "ema_8": 575.29, "ema_21": 575.84, "sma_50": 569.16, "bb_upper": 588.18, "bb_middle": 578.91, "bb_lower": 569.64}, {"date": "2024-11-06", "open": 589.2, "high": 591.93, "low": 585.39, "close": 591.04, "volume": 68181968, "ema_8": 578.79, "ema_21": 577.22, "sma_50": 569.75, "bb_upper": 590.29, "bb_middle": 579.61, "bb_lower": 568.92}, {"date": "2024-11-07", "open": 593.08, "high": 596.65, "low": 593.0, "close": 595.61, "volume": 47233212, "ema_8": 582.53, "ema_21": 578.9, "sma_50": 570.5, "bb_upper": 593.29, "bb_middle": 580.58, "bb_lower": 567.87}, {"date": "2024-11-08", "open": 596.17, "high": 599.64, "low": 596.16, "close": 598.19, "volume": 46444893, "ema_8": 586.01, "ema_21": 580.65, "sma_50": 571.3, "bb_upper": 596.44, "bb_middle": 581.51, "bb_lower": 566.58}, {"date": "2024-11-11", "open": 599.81, "high": 600.17, "low": 597.0, "close": 598.76, "volume": 37586773, "ema_8": 588.84, "ema_21": 582.3, "sma_50": 572.0, "bb_upper": 599.02, "bb_middle": 582.23, "bb_lower": 565.45}, {"date": "2024-11-12", "open": 598.68, "high": 599.29, "low": 594.37, "close": 596.9, "volume": 43006128, "ema_8": 590.63, "ema_21": 583.62, "sma_50": 572.89, "bb_upper": 601.05, "bb_middle": 583.09, "bb_lower": 565.12}, {"date": "2024-11-13", "open": 597.37, "high": 599.23, "low": 594.96, "close": 597.19, "volume": 47388640, "ema_8": 592.09, "ema_21": 584.86, "sma_50": 573.82, "bb_upper": 602.86, "bb_middle": 583.83, "bb_lower": 564.8}, {"date": "2024-11-14", "open": 597.32, "high": 597.81, "low": 592.65, "close": 593.35, "volume": 38904109, "ema_8": 592.37, "ema_21": 585.63, "sma_50": 574.69, "bb_upper": 603.86, "bb_middle": 584.38, "bb_lower": 564.9}, {"date": "2024-11-15", "open": 589.72, "high": 590.2, "low": 583.86, "close": 585.75, "volume": 75988766, "ema_8": 590.9, "ema_21": 585.64, "sma_50": 575.6, "bb_upper": 603.93, "bb_middle": 584.44, "bb_lower": 564.95}, {"date": "2024-11-18", "open": 586.22, "high": 589.49, "low": 585.34, "close": 588.15, "volume": 37084081, "ema_8": 590.29, "ema_21": 585.87, "sma_50": 576.44, "bb_upper": 604.22, "bb_middle": 584.67, "bb_lower": 565.11}, {"date": "2024-11-19", "open": 584.71, "high": 591.04, "low": 584.03, "close": 590.3, "volume": 49412046, "ema_8": 590.29, "ema_21": 586.27, "sma_50": 577.27, "bb_upper": 604.72, "bb_middle": 585.02, "bb_lower": 565.31}, {"date": "2024-11-20", "open": 590.38, "high": 590.79, "low": 584.63, "close": 590.5, "volume": 50032576, "ema_8": 590.34, "ema_21": 586.66, "sma_50": 577.99, "bb_upper": 605.2, "bb_middle": 585.64, "bb_lower": 566.09}, {"date": "2024-11-21", "open": 593.4, "high": 595.12, "low": 587.45, "close": 593.67, "volume": 46750285, "ema_8": 591.08, "ema_21": 587.29, "sma_50": 578.68, "bb_upper": 605.99, "bb_middle": 586.36, "bb_lower": 566.74}, {"date": "2024-11-22", "open": 593.66, "high": 596.15, "low": 593.15, "close": 595.51, "volume": 38226390, "ema_8": 592.06, "ema_21": 588.04, "sma_50": 579.35, "bb_upper": 606.9, "bb_middle": 587.19, "bb_lower": 567.47}, {"date": "2024-11-25", "open": 599.52, "high": 600.86, "low": 595.2, "close": 597.53, "volume": 42441393, "ema_8": 593.28, "ema_21": 588.9, "sma_50": 580.04, "bb_upper": 608.01, "bb_middle": 588.02, "bb_lower": 568.03}, {"date": "2024-11-26", "open": 598.8, "high": 601.33, "low": 598.07, "close": 600.65, "volume": 45621288, "ema_8": 594.92, "ema_21": 589.97, "sma_50": 580.79, "bb_upper": 609.49, "bb_middle": 588.97, "bb_lower": 568.44}, {"date": "2024-11-27", "open": 600.46, "high": 600.85, "low": 597.28, "close": 598.83, "volume": 34000163, "ema_8": 595.79, "ema_21": 590.78, "sma_50": 581.54, "bb_upper": 610.43, "bb_middle": 589.91, "bb_lower": 569.38}, {"date": "2024-11-29", "open": 599.66, "high": 603.35, "low": 599.38, "close": 602.55, "volume": 30177351, "ema_8": 597.29, "ema_21": 591.85, "sma_50": 582.17, "bb_upper": 610.24, "bb_middle": 591.6, "bb_lower": 572.96}, {"date": "2024-12-02", "open": 602.97, "high": 604.32, "low": 602.47, "close": 603.63, "volume": 31745989, "ema_8": 598.7, "ema_21": 592.92, "sma_50": 582.88, "bb_upper": 609.9, "bb_middle": 593.23, "bb_lower": 576.56}, {"date": "2024-12-03", "open": 603.39, "high": 604.16, "low": 602.34, "close": 603.91, "volume": 26906629, "ema_8": 599.86, "ema_21": 593.92, "sma_50": 583.57, "bb_upper": 608.13, "bb_middle": 594.94, "bb_lower": 581.74}, {"date": "2024-12-04", "open": 605.63, "high": 607.91, "low": 604.95, "close": 607.66, "volume": 42787561, "ema_8": 601.59, "ema_21": 595.17, "sma_50": 584.29, "bb_upper": 607.8, "bb_middle": 596.48, "bb_lower": 585.17}, {"date": "2024-12-05", "open": 607.66, "high": 608.48, "low": 606.3, "close": 606.66, "volume": 28762183, "ema_8": 602.72, "ema_21": 596.21, "sma_50": 585.03, "bb_upper": 609.14, "bb_middle": 597.27, "bb_lower": 585.39}, {"date": "2024-12-06", "open": 607.44, "high": 609.07, "low": 607.02, "close": 607.81, "volume": 31241549, "ema_8": 603.85, "ema_21": 597.27, "sma_50": 585.74, "bb_upper": 610.62, "bb_middle": 597.88, "bb_lower": 585.13}, {"date": "2024-12-09", "open": 607.69, "high": 607.86, "low": 604.08, "close": 604.68, "volume": 34742738, "ema_8": 604.03, "ema_21": 597.94, "sma_50": 586.4, "bb_upper": 611.3, "bb_middle": 598.2, "bb_lower": 585.1}, {"date": "2024-12-10", "open": 605.37, "high": 605.8, "low": 602.13, "close": 602.8, "volume": 37234515, "ema_8": 603.76, "ema_21": 598.38, "sma_50": 586.98, "bb_upper": 611.66, "bb_middle": 598.4, "bb_lower": 585.14}, {"date": "2024-12-11", "open": 605.78, "high": 608.43, "low": 605.5, "close": 607.46, "volume": 28677723, "ema_8": 604.58, "ema_21": 599.21, "sma_50": 587.76, "bb_upper": 612.77, "bb_middle": 598.93, "bb_lower": 585.09}, {"date": "2024-12-12", "open": 606.58, "high": 607.16, "low": 604.33, "close": 604.33, "volume": 31543812, "ema_8": 604.53, "ema_21": 599.67, "sma_50": 588.47, "bb_upper": 613.3, "bb_middle": 599.29, "bb_lower": 585.27}, {"date": "2024-12-13", "open": 606.4, "high": 607.13, "low": 602.81, "close": 604.21, "volume": 35904730, "ema_8": 604.46, "ema_21": 600.09, "sma_50": 589.2, "bb_upper": 613.72, "bb_middle": 599.83, "bb_lower": 585.94}, {"date": "2024-12-16", "open": 606.0, "high": 607.78, "low": 605.21, "close": 606.79, "volume": 43695179, "ema_8": 604.97, "ema_21": 600.69, "sma_50": 589.87, "bb_upper": 613.4, "bb_middle": 600.88, "bb_lower": 588.36}, {"date": "2024-12-17", "open": 604.19, "high": 605.17, "low": 602.88, "close": 604.29, "volume": 55773545, "ema_8": 604.82, "ema_21": 601.02, "sma_50": 590.6, "bb_upper": 612.75, "bb_middle": 601.69, "bb_lower": 590.63}, {"date": "2024-12-18", "open": 603.98, "high": 606.4, "low": 585.89, "close": 586.28, "volume": 108248729, "ema_8": 600.7, "ema_21": 599.68, "sma_50": 590.86, "bb_upper": 613.52, "bb_middle": 601.49, "bb_lower": 589.45}, {"date": "2024-12-19", "open": 591.36, "high": 593.0, "low": 585.85, "close": 586.1, "volume": 85919452, "ema_8": 597.46, "ema_21": 598.45, "sma_50": 591.04, "bb_upper": 614.27, "bb_middle": 601.27, "bb_lower": 588.27}, {"date": "2024-12-20", "open": 581.77, "high": 595.75, "low": 580.91, "close": 591.15, "volume": 125716674, "ema_8": 596.06, "ema_21": 597.78, "sma_50": 591.34, "bb_upper": 614.5, "bb_middle": 601.14, "bb_lower": 587.79}]};
        const qqqData = {"symbol": "QQQ", "data": [{"date": "2024-09-24", "open": 484.46, "high": 486.33, "low": 480.17, "close": 485.37, "volume": 25952637, "ema_8": 478.74, "ema_21": 473.29, "sma_50": 467.99, "bb_upper": 490.74, "bb_middle": 470.49, "bb_lower": 450.25}, {"date": "2024-09-25", "open": 484.74, "high": 487.79, "low": 484.56, "close": 485.82, "volume": 26549866, "ema_8": 480.32, "ema_21": 474.43, "sma_50": 467.78, "bb_upper": 492.17, "bb_middle": 470.95, "bb_lower": 449.73}, {"date": "2024-09-26", "open": 493.37, "high": 493.7, "low": 485.8, "close": 489.47, "volume": 32020206, "ema_8": 482.35, "ema_21": 475.8, "sma_50": 467.94, "bb_upper": 494.63, "bb_middle": 471.85, "bb_lower": 449.07}, {"date": "2024-09-27", "open": 490.5, "high": 490.64, "low": 485.56, "close": 486.75, "volume": 22851120, "ema_8": 483.33, "ema_21": 476.79, "sma_50": 468.08, "bb_upper": 496.38, "bb_middle": 472.66, "bb_lower": 448.94}, {"date": "2024-09-30", "open": 485.78, "high": 488.41, "low": 482.92, "close": 488.07, "volume": 30330605, "ema_8": 484.38, "ema_21": 477.82, "sma_50": 468.34, "bb_upper": 497.91, "bb_middle": 473.25, "bb_lower": 448.58}, {"date": "2024-10-01", "open": 487.7, "high": 488.0, "low": 477.4, "close": 481.27, "volume": 42735424, "ema_8": 483.69, "ema_21": 478.13, "sma_50": 468.32, "bb_upper": 498.52, "bb_middle": 474.22, "bb_lower": 449.92}, {"date": "2024-10-02", "open": 480.36, "high": 483.88, "low": 477.72, "close": 481.95, "volume": 23744049, "ema_8": 483.3, "ema_21": 478.48, "sma_50": 468.34, "bb_upper": 498.94, "bb_middle": 475.29, "bb_lower": 451.64}, {"date": "2024-10-03", "open": 479.74, "high": 484.55, "low": 478.99, "close": 481.59, "volume": 25337220, "ema_8": 482.92, "ema_21": 478.76, "sma_50": 468.71, "bb_upper": 499.13, "bb_middle": 476.31, "bb_lower": 453.5}, {"date": "2024-10-04", "open": 487.45, "high": 487.88, "low": 482.38, "close": 487.32, "volume": 30744909, "ema_8": 483.9, "ema_21": 479.54, "sma_50": 469.29, "bb_upper": 497.47, "bb_middle": 478.25, "bb_lower": 459.02}, {"date": "2024-10-07", "open": 485.39, "high": 486.57, "low": 480.87, "close": 482.1, "volume": 24975119, "ema_8": 483.5, "ema_21": 479.77, "sma_50": 469.67, "bb_upper": 495.3, "bb_middle": 479.63, "bb_lower": 463.96}, {"date": "2024-10-08", "open": 484.66, "high": 489.99, "low": 483.85, "close": 489.3, "volume": 28272017, "ema_8": 484.79, "ema_21": 480.64, "sma_50": 470.18, "bb_upper": 493.92, "bb_middle": 481.16, "bb_lower": 468.4}, {"date": "2024-10-09", "open": 489.0, "high": 493.73, "low": 487.95, "close": 493.15, "volume": 24994950, "ema_8": 486.65, "ema_21": 481.78, "sma_50": 470.89, "bb_upper": 494.78, "bb_middle": 482.39, "bb_lower": 469.99}, {"date": "2024-10-10", "open": 490.85, "high": 494.47, "low": 489.53, "close": 492.59, "volume": 25750446, "ema_8": 487.97, "ema_21": 482.76, "sma_50": 471.32, "bb_upper": 495.76, "bb_middle": 483.36, "bb_lower": 470.95}, {"date": "2024-10-11", "open": 490.74, "high": 494.39, "low": 490.17, "close": 493.36, "volume": 20644497, "ema_8": 489.17, "ema_21": 483.72, "sma_50": 472.0, "bb_upper": 496.83, "bb_middle": 484.26, "bb_lower": 471.68}, {"date": "2024-10-14", "open": 495.77, "high": 498.83, "low": 495.26, "close": 497.5, "volume": 26060145, "ema_8": 491.02, "ema_21": 484.98, "sma_50": 472.97, "bb_upper": 498.25, "bb_middle": 485.47, "bb_lower": 472.69}, {"date": "2024-10-15", "open": 497.83, "high": 498.5, "low": 488.68, "close": 490.85, "volume": 34784506, "ema_8": 490.98, "ema_21": 485.51, "sma_50": 474.08, "bb_upper": 498.0, "bb_middle": 486.34, "bb_lower": 474.68}, {"date": "2024-10-16", "open": 491.18, "high": 491.69, "low": 487.57, "close": 490.91, "volume": 22996776, "ema_8": 490.96, "ema_21": 486.0, "sma_50": 475.11, "bb_upper": 496.78, "bb_middle": 487.31, "bb_lower": 477.84}, {"date": "2024-10-17", "open": 496.44, "high": 496.49, "low": 491.19, "close": 491.25, "volume": 27210658, "ema_8": 491.03, "ema_21": 486.48, "sma_50": 476.24, "bb_upper": 497.14, "bb_middle": 487.7, "bb_lower": 478.27}, {"date": "2024-10-18", "open": 494.06, "high": 495.57, "low": 493.3, "close": 494.47, "volume": 25335030, "ema_8": 491.79, "ema_21": 487.2, "sma_50": 477.17, "bb_upper": 497.86, "bb_middle": 488.31, "bb_lower": 478.75}, {"date": "2024-10-21", "open": 493.25, "high": 496.23, "low": 491.31, "close": 495.42, "volume": 30336549, "ema_8": 492.6, "ema_21": 487.95, "sma_50": 478.07, "bb_upper": 498.65, "bb_middle": 488.93, "bb_lower": 479.2}, {"date": "2024-10-22", "open": 492.73, "high": 497.44, "low": 491.97, "close": 495.96, "volume": 26685841, "ema_8": 493.35, "ema_21": 488.68, "sma_50": 478.96, "bb_upper": 499.51, "bb_middle": 489.46, "bb_lower": 479.4}, {"date": "2024-10-23", "open": 493.59, "high": 494.25, "low": 485.05, "close": 488.36, "volume": 39346565, "ema_8": 492.24, "ema_21": 488.65, "sma_50": 479.47, "bb_upper": 499.51, "bb_middle": 489.58, "bb_lower": 479.66}, {"date": "2024-10-24", "open": 492.11, "high": 493.0, "low": 489.44, "close": 492.32, "volume": 22024930, "ema_8": 492.26, "ema_21": 488.98, "sma_50": 480.07, "bb_upper": 499.72, "bb_middle": 489.72, "bb_lower": 479.73}, {"date": "2024-10-25", "open": 495.14, "high": 500.28, "low": 494.43, "close": 495.32, "volume": 38762143, "ema_8": 492.94, "ema_21": 489.56, "sma_50": 480.48, "bb_upper": 500.35, "bb_middle": 490.15, "bb_lower": 479.96}, {"date": "2024-10-28", "open": 498.46, "high": 498.52, "low": 495.1, "close": 495.4, "volume": 20477778, "ema_8": 493.48, "ema_21": 490.09, "sma_50": 480.89, "bb_upper": 500.92, "bb_middle": 490.52, "bb_lower": 480.12}, {"date": "2024-10-29", "open": 495.72, "high": 501.35, "low": 493.85, "close": 500.16, "volume": 28014059, "ema_8": 494.97, "ema_21": 491.01, "sma_50": 481.27, "bb_upper": 501.76, "bb_middle": 491.46, "bb_lower": 481.17}, {"date": "2024-10-30", "open": 499.39, "high": 500.35, "low": 495.89, "close": 496.38, "volume": 29755960, "ema_8": 495.28, "ema_21": 491.49, "sma_50": 481.59, "bb_upper": 501.67, "bb_middle": 492.19, "bb_lower": 482.71}, {"date": "2024-10-31", "open": 492.38, "high": 492.43, "low": 483.75, "close": 483.85, "volume": 41245248, "ema_8": 492.74, "ema_21": 490.8, "sma_50": 481.62, "bb_upper": 501.29, "bb_middle": 492.3, "bb_lower": 483.31}, {"date": "2024-11-01", "open": 485.5, "high": 490.75, "low": 485.2, "close": 487.43, "volume": 33655757, "ema_8": 491.56, "ema_21": 490.49, "sma_50": 481.87, "bb_upper": 501.28, "bb_middle": 492.3, "bb_lower": 483.33}, {"date": "2024-11-04", "open": 486.82, "high": 489.38, "low": 484.25, "close": 486.01, "volume": 23291580, "ema_8": 490.33, "ema_21": 490.09, "sma_50": 481.99, "bb_upper": 500.68, "bb_middle": 492.5, "bb_lower": 484.32}, {"date": "2024-11-05", "open": 487.61, "high": 492.88, "low": 487.52, "close": 492.21, "volume": 24353615, "ema_8": 490.75, "ema_21": 490.28, "sma_50": 482.33, "bb_upper": 500.68, "bb_middle": 492.64, "bb_lower": 484.61}, {"date": "2024-11-06", "open": 500.56, "high": 506.41, "low": 499.6, "close": 505.58, "volume": 43082198, "ema_8": 494.04, "ema_21": 491.67, "sma_50": 482.9, "bb_upper": 503.17, "bb_middle": 493.27, "bb_lower": 483.36}, {"date": "2024-11-07", "open": 508.4, "high": 514.33, "low": 508.34, "close": 513.54, "volume": 32853120, "ema_8": 498.38, "ema_21": 493.66, "sma_50": 483.75, "bb_upper": 507.73, "bb_middle": 494.31, "bb_lower": 480.9}, {"date": "2024-11-08", "open": 513.03, "high": 514.92, "low": 512.41, "close": 514.14, "volume": 22924483, "ema_8": 501.88, "ema_21": 495.52, "sma_50": 484.62, "bb_upper": 511.42, "bb_middle": 495.35, "bb_lower": 479.29}, {"date": "2024-11-11", "open": 515.37, "high": 515.58, "low": 510.92, "close": 513.84, "volume": 24167479, "ema_8": 504.54, "ema_21": 497.19, "sma_50": 485.37, "bb_upper": 514.23, "bb_middle": 496.17, "bb_lower": 478.11}, {"date": "2024-11-12", "open": 513.77, "high": 514.66, "low": 509.83, "close": 512.91, "volume": 25835288, "ema_8": 506.4, "ema_21": 498.62, "sma_50": 486.39, "bb_upper": 516.61, "bb_middle": 497.27, "bb_lower": 477.93}, {"date": "2024-11-13", "open": 512.4, "high": 514.98, "low": 509.95, "close": 512.25, "volume": 24567416, "ema_8": 507.7, "ema_21": 499.85, "sma_50": 487.42, "bb_upper": 518.54, "bb_middle": 498.34, "bb_lower": 478.14}, {"date": "2024-11-14", "open": 511.91, "high": 512.79, "low": 507.77, "close": 508.69, "volume": 28679519, "ema_8": 507.92, "ema_21": 500.66, "sma_50": 488.38, "bb_upper": 519.63, "bb_middle": 499.21, "bb_lower": 478.8}, {"date": "2024-11-15", "open": 502.94, "high": 503.33, "low": 494.49, "close": 496.57, "volume": 51461054, "ema_8": 505.4, "ema_21": 500.29, "sma_50": 489.33, "bb_upper": 519.65, "bb_middle": 499.32, "bb_lower": 478.98}, {"date": "2024-11-18", "open": 498.13, "high": 502.14, "low": 496.73, "close": 500.02, "volume": 27192662, "ema_8": 504.2, "ema_21": 500.26, "sma_50": 490.25, "bb_upper": 519.8, "bb_middle": 499.55, "bb_lower": 479.3}, {"date": "2024-11-19", "open": 497.42, "high": 503.95, "low": 497.08, "close": 503.46, "volume": 24523020, "ema_8": 504.04, "ema_21": 500.55, "sma_50": 491.14, "bb_upper": 520.17, "bb_middle": 499.92, "bb_lower": 479.67}, {"date": "2024-11-20", "open": 503.16, "high": 503.48, "low": 496.56, "close": 503.17, "volume": 29565491, "ema_8": 503.84, "ema_21": 500.79, "sma_50": 491.83, "bb_upper": 520.2, "bb_middle": 500.66, "bb_lower": 481.12}, {"date": "2024-11-21", "open": 506.24, "high": 506.96, "low": 497.56, "close": 504.98, "volume": 34526738, "ema_8": 504.1, "ema_21": 501.17, "sma_50": 492.47, "bb_upper": 520.52, "bb_middle": 501.3, "bb_lower": 482.08}, {"date": "2024-11-22", "open": 504.42, "high": 506.53, "low": 502.78, "close": 505.79, "volume": 23826644, "ema_8": 504.47, "ema_21": 501.59, "sma_50": 493.08, "bb_upper": 520.92, "bb_middle": 501.82, "bb_lower": 482.71}, {"date": "2024-11-25", "open": 509.9, "high": 511.45, "low": 504.26, "close": 506.59, "volume": 26375166, "ema_8": 504.94, "ema_21": 502.05, "sma_50": 493.74, "bb_upper": 521.35, "bb_middle": 502.38, "bb_lower": 483.41}, {"date": "2024-11-26", "open": 508.08, "high": 510.14, "low": 507.23, "close": 509.31, "volume": 26557061, "ema_8": 505.91, "ema_21": 502.71, "sma_50": 494.46, "bb_upper": 522.02, "bb_middle": 502.84, "bb_lower": 483.65}, {"date": "2024-11-27", "open": 508.17, "high": 508.24, "low": 501.93, "close": 505.3, "volume": 24957441, "ema_8": 505.78, "ema_21": 502.94, "sma_50": 495.14, "bb_upper": 522.25, "bb_middle": 503.28, "bb_lower": 484.32}, {"date": "2024-11-29", "open": 505.93, "high": 510.34, "low": 505.31, "close": 509.74, "volume": 15333968, "ema_8": 506.66, "ema_21": 503.56, "sma_50": 495.67, "bb_upper": 521.37, "bb_middle": 504.58, "bb_lower": 487.79}, {"date": "2024-12-02", "open": 511.01, "high": 516.26, "low": 510.62, "close": 515.29, "volume": 25147165, "ema_8": 508.58, "ema_21": 504.63, "sma_50": 496.32, "bb_upper": 521.33, "bb_middle": 505.97, "bb_lower": 490.61}, {"date": "2024-12-03", "open": 513.95, "high": 517.15, "low": 513.37, "close": 516.87, "volume": 18597900, "ema_8": 510.42, "ema_21": 505.74, "sma_50": 497.0, "bb_upper": 520.44, "bb_middle": 507.51, "bb_lower": 494.59}, {"date": "2024-12-04", "open": 520.32, "high": 523.52, "low": 519.6, "close": 523.26, "volume": 26086222, "ema_8": 513.27, "ema_21": 507.33, "sma_50": 497.76, "bb_upper": 521.71, "bb_middle": 509.06, "bb_lower": 496.42}, {"date": "2024-12-05", "open": 523.31, "high": 524.04, "low": 521.42, "close": 521.81, "volume": 18169632, "ema_8": 515.17, "ema_21": 508.65, "sma_50": 498.48, "bb_upper": 523.61, "bb_middle": 509.88, "bb_lower": 496.14}, {"date": "2024-12-06", "open": 522.48, "high": 526.72, "low": 522.35, "close": 526.48, "volume": 23762611, "ema_8": 517.68, "ema_21": 510.27, "sma_50": 499.22, "bb_upper": 526.09, "bb_middle": 510.52, "bb_lower": 494.96}, {"date": "2024-12-09", "open": 525.55, "high": 526.35, "low": 521.22, "close": 522.38, "volume": 20674405, "ema_8": 518.73, "ema_21": 511.37, "sma_50": 499.93, "bb_upper": 527.32, "bb_middle": 510.94, "bb_lower": 494.56}, {"date": "2024-12-10", "open": 523.62, "high": 525.38, "low": 519.16, "close": 520.6, "volume": 24350040, "ema_8": 519.14, "ema_21": 512.21, "sma_50": 500.58, "bb_upper": 528.18, "bb_middle": 511.27, "bb_lower": 494.37}, {"date": "2024-12-11", "open": 525.0, "high": 530.61, "low": 524.59, "close": 529.92, "volume": 32168579, "ema_8": 521.54, "ema_21": 513.82, "sma_50": 501.55, "bb_upper": 530.97, "bb_middle": 512.12, "bb_lower": 493.27}, {"date": "2024-12-12", "open": 527.68, "high": 528.96, "low": 526.02, "close": 526.5, "volume": 23577504, "ema_8": 522.64, "ema_21": 514.97, "sma_50": 502.44, "bb_upper": 532.75, "bb_middle": 512.84, "bb_lower": 492.92}, {"date": "2024-12-13", "open": 530.46, "high": 533.17, "low": 527.3, "close": 530.53, "volume": 28780405, "ema_8": 524.39, "ema_21": 516.39, "sma_50": 503.42, "bb_upper": 535.23, "bb_middle": 513.93, "bb_lower": 492.62}, {"date": "2024-12-16", "open": 533.08, "high": 539.15, "low": 533.0, "close": 538.17, "volume": 31979863, "ema_8": 527.46, "ema_21": 518.37, "sma_50": 504.44, "bb_upper": 538.28, "bb_middle": 516.01, "bb_lower": 493.74}, {"date": "2024-12-17", "open": 536.36, "high": 537.48, "low": 534.13, "close": 535.8, "volume": 28579070, "ema_8": 529.31, "ema_21": 519.95, "sma_50": 505.51, "bb_upper": 540.41, "bb_middle": 517.8, "bb_lower": 495.19}, {"date": "2024-12-18", "open": 535.15, "high": 536.88, "low": 515.01, "close": 516.47, "volume": 54703155, "ema_8": 526.46, "ema_21": 519.64, "sma_50": 506.06, "bb_upper": 540.05, "bb_middle": 518.45, "bb_lower": 496.85}, {"date": "2024-12-19", "open": 521.19, "high": 521.76, "low": 513.83, "close": 514.17, "volume": 46441754, "ema_8": 523.73, "ema_21": 519.14, "sma_50": 506.48, "bb_upper": 539.49, "bb_middle": 519.0, "bb_lower": 498.51}, {"date": "2024-12-20", "open": 510.44, "high": 524.82, "low": 509.29, "close": 518.66, "volume": 60529961, "ema_8": 522.6, "ema_21": 519.09, "sma_50": 507.0, "bb_upper": 539.09, "bb_middle": 519.68, "bb_lower": 500.28}]};
        const spyScorecardData = {"v1_scorecard": [{"date": "2024-11-22", "value": 0}, {"date": "2024-11-25", "value": 0}, {"date": "2024-11-26", "value": 0}, {"date": "2024-11-27", "value": 0}, {"date": "2024-11-29", "value": 0}, {"date": "2024-12-02", "value": 0}, {"date": "2024-12-03", "value": 0}, {"date": "2024-12-04", "value": 0}, {"date": "2024-12-05", "value": 0}, {"date": "2024-12-06", "value": 0}, {"date": "2024-12-09", "value": 0}, {"date": "2024-12-10", "value": 0}, {"date": "2024-12-11", "value": 0}, {"date": "2024-12-12", "value": 0}, {"date": "2024-12-13", "value": 0}, {"date": "2024-12-16", "value": 0}, {"date": "2024-12-17", "value": 0}, {"date": "2024-12-18", "value": 0}, {"date": "2024-12-19", "value": 0}, {"date": "2024-12-20", "value": 0}], "v2_scorecard": [{"date": "2024-11-22", "value": 0}, {"date": "2024-11-25", "value": 0}, {"date": "2024-11-26", "value": 0}, {"date": "2024-11-27", "value": 0}, {"date": "2024-11-29", "value": 0}, {"date": "2024-12-02", "value": 0}, {"date": "2024-12-03", "value": 0}, {"date": "2024-12-04", "value": 0}, {"date": "2024-12-05", "value": 0}, {"date": "2024-12-06", "value": 0}, {"date": "2024-12-09", "value": 0}, {"date": "2024-12-10", "value": 0}, {"date": "2024-12-11", "value": 0}, {"date": "2024-12-12", "value": 0}, {"date": "2024-12-13", "value": 0}, {"date": "2024-12-16", "value": 0}, {"date": "2024-12-17", "value": 0}, {"date": "2024-12-18", "value": 0}, {"date": "2024-12-19", "value": 0}, {"date": "2024-12-20", "value": 0}]};
        const qqqScorecardData = {"v1_scorecard": [{"date": "2024-11-22", "value": 0}, {"date": "2024-11-25", "value": 0}, {"date": "2024-11-26", "value": 0}, {"date": "2024-11-27", "value": 0}, {"date": "2024-11-29", "value": 0}, {"date": "2024-12-02", "value": 0}, {"date": "2024-12-03", "value": 0}, {"date": "2024-12-04", "value": 0}, {"date": "2024-12-05", "value": 0}, {"date": "2024-12-06", "value": 0}, {"date": "2024-12-09", "value": 0}, {"date": "2024-12-10", "value": 0}, {"date": "2024-12-11", "value": 0}, {"date": "2024-12-12", "value": 0}, {"date": "2024-12-13", "value": 0}, {"date": "2024-12-16", "value": 0}, {"date": "2024-12-17", "value": 0}, {"date": "2024-12-18", "value": 0}, {"date": "2024-12-19", "value": 0}, {"date": "2024-12-20", "value": 0}], "v2_scorecard": [{"date": "2024-11-22", "value": 0}, {"date": "2024-11-25", "value": 0}, {"date": "2024-11-26", "value": 0}, {"date": "2024-11-27", "value": 0}, {"date": "2024-11-29", "value": 0}, {"date": "2024-12-02", "value": 0}, {"date": "2024-12-03", "value": 0}, {"date": "2024-12-04", "value": 0}, {"date": "2024-12-05", "value": 0}, {"date": "2024-12-06", "value": 0}, {"date": "2024-12-09", "value": 0}, {"date": "2024-12-10", "value": 0}, {"date": "2024-12-11", "value": 0}, {"date": "2024-12-12", "value": 0}, {"date": "2024-12-13", "value": 0}, {"date": "2024-12-16", "value": 0}, {"date": "2024-12-17", "value": 0}, {"date": "2024-12-18", "value": 0}, {"date": "2024-12-19", "value": 0}, {"date": "2024-12-20", "value": 0}]};
        // TradingView-style color scheme
        const COLORS = {
            bg: '#1a1a1a',
            grid: '#333333',
            text: '#ffffff',
            green: '#26A69A',
            red: '#EF5350',
            volume: '#434651',
            ema8: '#B0B0B0',     // Light gray
            ema21: '#D8BFD8',    // Light purple
            sma50: '#FFEB3B',
            bb_upper: '#4CAF50',
            bb_middle: '#2196F3',
            bb_lower: '#F44336',
            v1_scorecard: '#2196F3',
            v2_scorecard: '#9C27B0'
        };
        class CandlestickChart {
            constructor(containerId, data, scorecardData) {
                this.container = document.getElementById(containerId);
                this.data = data;
                this.scorecardData = scorecardData;
                this.width = this.container.clientWidth;
                this.height = this.container.clientHeight || 640;
                this.margin = { top: 10, right: 10, bottom: 30, left: 10 };
                this.chartWidth = this.width - this.margin.left - this.margin.right;
                this.chartHeight = this.height - this.margin.top - this.margin.bottom;
                this.setupScales();
                this.render();
            }
            setupScales() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    return;
                }
                const prices = this.data.data;
                const priceRange = this.getPriceRange(prices);
                const volumeRange = this.getVolumeRange(prices);
                this.xScale = (i) => (i / (prices.length - 1)) * this.chartWidth;
                this.yScale = (price) => this.chartHeight * 0.7 * (1 - (price - priceRange.min) / (priceRange.max - priceRange.min));
                this.volumeScale = (volume) => (this.chartHeight * 0.25) * (volume / volumeRange.max);
            }
            getPriceRange(prices) {
                const allPrices = [];
                prices.forEach(p => {
                    allPrices.push(p.high, p.low, p.open, p.close);
                    if (p.ema_8) allPrices.push(p.ema_8);
                    if (p.ema_21) allPrices.push(p.ema_21);
                    if (p.sma_50) allPrices.push(p.sma_50);
                    if (p.bb_upper) allPrices.push(p.bb_upper);
                    if (p.bb_lower) allPrices.push(p.bb_lower);
                });
                return { min: Math.min(...allPrices), max: Math.max(...allPrices) };
            }
            
            getVolumeRange(prices) {
                const volumes = prices.map(p => p.volume);
                return { min: Math.min(...volumes), max: Math.max(...volumes) };
            }
            
            render() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    this.container.innerHTML = '<div style="color: white; text-align: center; padding: 50px;">No chart data available</div>';
                    return;
                }
                
                    // Create SVG with fixed pixel width for proper alignment
                    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svg.setAttribute('width', `${this.width}`);
                    svg.setAttribute('height', `${this.height}`);
                    svg.style.backgroundColor = COLORS.bg;
                    svg.style.display = 'block';
                    svg.style.margin = '0 auto';
                
                // Create tooltip element
                this.tooltip = document.createElement('div');
                this.tooltip.style.cssText = `
                    position: absolute;
                    background: rgba(0,0,0,0.92);
                    color: #fff;
                    padding: 7px 12px;
                    border-radius: 5px;
                    font-size: 13px;
                    pointer-events: none;
                    opacity: 0;
                    z-index: 1000;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                    transition: opacity 0.2s;
                    white-space: pre;
                `;
                this.container.style.position = 'relative';
                
                // Create main chart group
                const chartGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                chartGroup.setAttribute('transform', `translate(${this.margin.left}, ${this.margin.top})`);
                
                // Draw grid
                this.drawGrid(chartGroup);
                
                // Draw Bollinger Bands
                this.drawBollingerBands(chartGroup);
                
                // Draw moving averages
                this.drawMovingAverages(chartGroup);
                
                // Draw candlesticks
                this.drawCandlesticks(chartGroup);
                
                // Draw volume
                this.drawVolume(chartGroup);
                
                // Draw scorecard overlays
                this.drawScorecardOverlays(chartGroup);
                
                // Draw axes
                this.drawAxes(chartGroup);
                
                // Draw legend
                this.drawLegend(chartGroup);
                
                svg.appendChild(chartGroup);
                this.container.innerHTML = '';
                this.container.appendChild(this.tooltip);
                this.container.appendChild(svg);
            }
            
            drawGrid(group) {
                // Horizontal grid lines
                for (let i = 0; i <= 10; i++) {
                    const y = (i / 10) * this.chartHeight * 0.7;
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', 0);
                    line.setAttribute('x2', this.chartWidth);
                    line.setAttribute('y1', y);
                    line.setAttribute('y2', y);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }
                
                // Vertical grid lines  
                const dataLength = this.data.data.length;
                for (let i = 0; i < dataLength; i += Math.floor(dataLength / 6)) {
                    const x = this.xScale(i);
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x);
                    line.setAttribute('x2', x);
                    line.setAttribute('y1', 0);
                    line.setAttribute('y2', this.chartHeight);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }
            }
            
            drawCandlesticks(group) {
                this.data.data.forEach((candle, i) => {
                    const x = this.xScale(i);
                    const candleWidth = Math.max(1, this.chartWidth / this.data.data.length * 0.8);
                    
                    const openY = this.yScale(candle.open);
                    const closeY = this.yScale(candle.close);
                    const highY = this.yScale(candle.high);
                    const lowY = this.yScale(candle.low);
                    
                    const isGreen = candle.close >= candle.open;
                    const color = isGreen ? COLORS.green : COLORS.red;
                    
                    // Create a group for each candlestick to handle hover events
                    const candleGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                    candleGroup.style.cursor = 'pointer';
                    
                    // Draw high-low line
                    const wickLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    wickLine.setAttribute('x1', x);
                    wickLine.setAttribute('x2', x);
                    wickLine.setAttribute('y1', highY);
                    wickLine.setAttribute('y2', lowY);
                    wickLine.setAttribute('stroke', color);
                    wickLine.setAttribute('stroke-width', 1);
                    candleGroup.appendChild(wickLine);
                    
                    // Draw body
                    const bodyHeight = Math.abs(closeY - openY);
                    const bodyY = Math.min(openY, closeY);
                    
                    const body = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    body.setAttribute('x', x - candleWidth/2);
                    body.setAttribute('y', bodyY);
                    body.setAttribute('width', candleWidth);
                    body.setAttribute('height', Math.max(1, bodyHeight));
                    body.setAttribute('fill', color);  // Always fill with color
                    body.setAttribute('stroke', color);
                    body.setAttribute('stroke-width', 1);
                    candleGroup.appendChild(body);
                    
                    // Add invisible hover area for better mouse interaction
                    const hoverArea = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    hoverArea.setAttribute('x', x - candleWidth/2 - 2);
                    hoverArea.setAttribute('y', Math.min(highY, lowY));
                    hoverArea.setAttribute('width', candleWidth + 4);
                    hoverArea.setAttribute('height', Math.abs(highY - lowY) + 4);
                    hoverArea.setAttribute('fill', 'transparent');
                    candleGroup.appendChild(hoverArea);
                    
                    // Add hover event listeners
                    candleGroup.addEventListener('mouseenter', (e) => {
                        this.showTooltip(e, candle);
                    });
                    candleGroup.addEventListener('mouseleave', () => {
                        this.hideTooltip();
                    });
                    candleGroup.addEventListener('mousemove', (e) => {
                        this.updateTooltipPosition(e);
                    });
                    
                    group.appendChild(candleGroup);
                });
            }
            
            drawVolume(group) {
                const volumeBase = this.chartHeight * 0.75;
                this.data.data.forEach((candle, i) => {
                    const x = this.xScale(i);
                    const barWidth = Math.max(1, this.chartWidth / this.data.data.length * 0.8);
                    const barHeight = this.volumeScale(candle.volume);
                    
                    const bar = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    bar.setAttribute('x', x - barWidth/2);
                    bar.setAttribute('y', volumeBase);
                    bar.setAttribute('width', barWidth);
                    bar.setAttribute('height', barHeight);
                    bar.setAttribute('fill', COLORS.volume);
                    bar.setAttribute('opacity', 0.6);
                    group.appendChild(bar);
                });
            }
            
            drawMovingAverages(group) {
                this.drawLine(group, 'ema_8', COLORS.ema8, 2, 1, '5,5');    // Dashed light gray
                this.drawLine(group, 'ema_21', COLORS.ema21, 2, 1, '5,5');  // Dashed light purple
                this.drawLine(group, 'sma_50', COLORS.sma50, 2);             // Solid yellow
            }
            
            drawBollingerBands(group) {
                this.drawLine(group, 'bb_upper', COLORS.bb_upper, 1, 0.6);
                this.drawLine(group, 'bb_middle', COLORS.bb_middle, 1, 0.6);
                this.drawLine(group, 'bb_lower', COLORS.bb_lower, 1, 0.6);
            }
            
            drawLine(group, field, color, strokeWidth = 1, opacity = 1, dashArray = null) {
                const points = [];
                this.data.data.forEach((candle, i) => {
                    if (candle[field] !== null && candle[field] !== undefined) {
                        const x = this.xScale(i);
                        const y = this.yScale(candle[field]);
                        points.push(`${x},${y}`);
                    }
                });
                
                if (points.length > 1) {
                    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                    polyline.setAttribute('points', points.join(' '));
                    polyline.setAttribute('fill', 'none');
                    polyline.setAttribute('stroke', color);
                    polyline.setAttribute('stroke-width', strokeWidth);
                    polyline.setAttribute('opacity', opacity);
                    if (dashArray) {
                        polyline.setAttribute('stroke-dasharray', dashArray);
                    }
                    group.appendChild(polyline);
                }
            }
            
            drawScorecardOverlays(group) {
                if (this.scorecardData && this.scorecardData.v1_scorecard) {
                    this.drawScorecardLine(group, this.scorecardData.v1_scorecard, COLORS.v1_scorecard);
                }
                if (this.scorecardData && this.scorecardData.v2_scorecard) {
                    this.drawScorecardLine(group, this.scorecardData.v2_scorecard, COLORS.v2_scorecard);
                }
            }
            
            drawScorecardLine(group, scorecardData, color) {
                // Map scorecard data to chart dates
                const scoreByDate = {};
                scorecardData.forEach(item => {
                    scoreByDate[item.date] = item.value;
                });

                // Scale scores to chart height using fixed 0-9 range for both V1 and V2
                const scaleScore = (score) => this.chartHeight * 0.7 * (1 - score / 9);

                const points = [];
                this.data.data.forEach((candle, i) => {
                    const score = scoreByDate[candle.date];
                    if (score !== undefined) {
                        const x = this.xScale(i);
                        const y = scaleScore(score);
                        points.push(`${x},${y}`);
                    }
                });

                if (points.length > 1) {
                    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                    polyline.setAttribute('points', points.join(' '));
                    polyline.setAttribute('fill', 'none');
                    polyline.setAttribute('stroke', color);
                    polyline.setAttribute('stroke-width', 3);
                    polyline.setAttribute('opacity', 0.8);
                    group.appendChild(polyline);
                }
            }
            
            drawAxes(group) {
                // Draw scorecard y-axis labels (0-9 range on the right side)
                const scorecardYAxisX = this.chartWidth + 5;
                for (let i = 0; i <= 9; i++) {
                    const y = this.chartHeight * 0.7 * (1 - i / 9);

                    // Add tick mark
                    const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    tick.setAttribute('x1', this.chartWidth);
                    tick.setAttribute('x2', this.chartWidth + 3);
                    tick.setAttribute('y1', y);
                    tick.setAttribute('y2', y);
                    tick.setAttribute('stroke', COLORS.text);
                    tick.setAttribute('stroke-width', 1);
                    group.appendChild(tick);

                    // Add label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', scorecardYAxisX);
                    text.setAttribute('y', y + 4);
                    text.setAttribute('font-family', 'Arial, sans-serif');
                    text.setAttribute('font-size', '10');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = i.toString();
                    group.appendChild(text);
                }
            }
            
            drawLegend(group) {
                // Legend items with colors and labels
                const legendItems = [
                    { label: 'Candlesticks: Green=Up, Red=Down', color: COLORS.green },
                    { label: '8 EMA', color: COLORS.ema8 },
                    { label: '21 EMA', color: COLORS.ema21 },
                    { label: '50 SMA', color: COLORS.sma50 },
                    { label: 'BB Upper', color: COLORS.bb_upper },
                    { label: 'BB Middle', color: COLORS.bb_middle },
                    { label: 'BB Lower', color: COLORS.bb_lower },
                    { label: 'V1 Scorecard', color: COLORS.v1_scorecard },
                    { label: 'V2 Scorecard', color: COLORS.v2_scorecard }
                ];
                
                const legendX = 10;
                const legendY = 10;
                const itemHeight = 14;
                
                // Create legend background
                const legendBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                legendBg.setAttribute('x', legendX - 5);
                legendBg.setAttribute('y', legendY - 5);
                legendBg.setAttribute('width', 200);
                legendBg.setAttribute('height', legendItems.length * itemHeight + 10);
                legendBg.setAttribute('fill', COLORS.bg);
                legendBg.setAttribute('stroke', COLORS.grid);
                legendBg.setAttribute('stroke-width', 1);
                legendBg.setAttribute('opacity', 0.9);
                group.appendChild(legendBg);
                
                // Add legend items
                legendItems.forEach((item, index) => {
                    const y = legendY + (index * itemHeight);
                    
                    // Color line
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', legendX);
                    line.setAttribute('x2', legendX + 15);
                    line.setAttribute('y1', y + 5);
                    line.setAttribute('y2', y + 5);
                    line.setAttribute('stroke', item.color);
                    line.setAttribute('stroke-width', 2);
                    group.appendChild(line);
                    
                    // Label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', legendX + 20);
                    text.setAttribute('y', y + 8);
                    text.setAttribute('font-family', 'Arial, sans-serif');
                    text.setAttribute('font-size', '10');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = item.label;
                    group.appendChild(text);
                });
            }
            
            showTooltip(event, candle) {
                if (!candle) return;

                // Format volume with commas
                const formatVolume = (vol) => {
                    return vol.toLocaleString('en-US');
                };

                // Format price to 2 decimal places
                const formatPrice = (price) => {
                    return price.toFixed(2);
                };

                // Get scorecard values for this date
                let v1Score = 'N/A';
                let v2Score = 'N/A';

                if (this.scorecardData) {
                    if (this.scorecardData.v1_scorecard) {
                        const v1Item = this.scorecardData.v1_scorecard.find(item => item.date === candle.date);
                        if (v1Item) v1Score = v1Item.value;
                    }
                    if (this.scorecardData.v2_scorecard) {
                        const v2Item = this.scorecardData.v2_scorecard.find(item => item.date === candle.date);
                        if (v2Item) v2Score = v2Item.value;
                    }
                }

                // Build tooltip text
                let tooltipText = `Date: ${candle.date}\n`;
                tooltipText += `Open: ${formatPrice(candle.open)}\n`;
                tooltipText += `High: ${formatPrice(candle.high)}\n`;
                tooltipText += `Low: ${formatPrice(candle.low)}\n`;
                tooltipText += `Close: ${formatPrice(candle.close)}\n`;
                tooltipText += `Volume: ${formatVolume(candle.volume)}\n`;
                tooltipText += `V1 Score: ${v1Score}\n`;
                tooltipText += `V2 Score: ${v2Score}`;

                this.tooltip.textContent = tooltipText;
                this.tooltip.style.opacity = '1';
                this.updateTooltipPosition(event);
            }
            
            hideTooltip() {
                this.tooltip.style.opacity = '0';
            }
            
            updateTooltipPosition(event) {
                const containerRect = this.container.getBoundingClientRect();
                const x = event.clientX - containerRect.left + 10;
                const y = event.clientY - containerRect.top - 10;
                
                this.tooltip.style.left = x + 'px';
                this.tooltip.style.top = y + 'px';
            }
        }
        
        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            new CandlestickChart('spy-chart', spyData, spyScorecardData);
            new CandlestickChart('qqq-chart', qqqData, qqqScorecardData);
        });
    </script>
</body>
</html>
