<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Scorecard - April 09, 2025</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1080px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .nav {
            margin-bottom: 20px;
        }
        .nav a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        .nav a:hover {
            text-decoration: underline;
        }
        .scorecard-summary {
            display: flex;
            gap: 30px;
            margin: 20px 0;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 8px;
        }
        .scorecard-section {
            flex: 1;
            text-align: center;
        }
        .score-value {
            font-size: 36px;
            font-weight: bold;
            margin: 10px 0;
        }
        .v1-score { color: #3498db; }
        .v2-score { color: #9b59b6; }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .component {
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #bdc3c7;
            background: #f8f9fa;
        }
        .component-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .component-name {
            font-weight: 600;
            color: #2c3e50;
        }
        .component-name a {
            color: #3498db;
            text-decoration: none;
        }
        .component-name a:hover {
            text-decoration: underline;
        }
        .component-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .component-status.pass {
            background: #d5f4e6;
            color: #27ae60;
        }
        .component-status.fail {
            background: #fadbd8;
            color: #e74c3c;
        }
        .component-details {
            font-size: 14px;
            color: #7f8c8d;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .metric-name {
            font-weight: 500;
        }
        .metric-name a {
            color: #3498db;
            text-decoration: none;
        }
        .metric-name a:hover {
            text-decoration: underline;
        }
        .metric-value {
            font-weight: bold;
            color: #2980b9;
        }
        .charts-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .chart-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: #1a1a1a;
        }
        .chart-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        .chart-root {
            position: relative;
            width: 100%;
            height: 640px;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 12px;
            text-align: center;
        }
        
        /* KPI Explanations Enhanced Styling */
        .explanations-section {
            margin-top: 40px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
        }
        
        .explanations-intro {
            font-style: italic;
            color: #6c757d;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.5;
            padding: 15px;
            background: #e9ecef;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }
        
        .explanation-category {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .explanation-category:last-child {
            border-bottom: none;
        }
        
        .explanation-category h3 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #495057;
            border-bottom: 1px solid #ced4da;
            padding-bottom: 8px;
        }
        
        .explanation-item {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .explanation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f8f9fa;
        }
        
        .explanation-header h4 {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
            flex: 1;
        }
        
        .explanation-score {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .explanation-score.pass {
            background: #d5f4e6;
            color: #27ae60;
            border: 2px solid #27ae60;
        }
        
        .explanation-score.fail {
            background: #fadbd8;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        
        .metric-current-value {
            background: #e3f2fd;
            color: #1976d2;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            border: 2px solid #1976d2;
        }
        
        .explanation-description {
            font-size: 16px;
            color: #495057;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 500;
        }
        
        .component-current-values {
            background: #fff3cd;
            color: #856404;
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #ffeaa7;
            font-size: 14px;
        }
        
        .component-current-values strong {
            color: #6c5ce7;
            font-weight: 600;
        }
        
        .explanation-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border-left: 4px solid #17a2b8;
        }
        
        .explanation-section {
            margin-bottom: 18px;
        }
        
        .explanation-section:last-child {
            margin-bottom: 0;
        }
        
        .explanation-section strong {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #343a40;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .explanation-section p {
            margin: 0;
            color: #6c757d;
            line-height: 1.5;
        }
        
        .explanation-section ul {
            margin: 0;
            padding-left: 20px;
            color: #6c757d;
        }
        
        .explanation-section li {
            margin-bottom: 6px;
            line-height: 1.5;
        }
        
        .metric-explanation {
            border-left: 4px solid #9b59b6;
        }
        
        .metric-explanation .explanation-details {
            border-left-color: #9b59b6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="2025-04-10.html">‚Üê Apr 10</a> | <a href="index.html">‚Üê Back to Home</a> | <a href="2025-04-08.html">Apr 08 ‚Üí</a>
        </div>
        <h1>Macro Scorecard - April 09, 2025</h1>
        <div class="scorecard-summary">
            <div class="scorecard-section">
                <h3>V1 Scorecard (Original)</h3>
                <div class="score-value v1-score">0/6</div>
            </div>
            <div class="scorecard-section">
                <h3>V2 Scorecard (New)</h3>
                <div class="score-value v2-score">3/9</div>
            </div>
        </div>
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">SPY Chart</div>
                <div id="spy-chart" class="chart-root"></div>
            </div>
            <div class="chart-container">
                <div class="chart-title">QQQ Chart</div>
                <div id="qqq-chart" class="chart-root"></div>
            </div>
        </div>
        <div class="section">
            <h2>V1 Components</h2>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#10-day-successful-new-high-index">10-Day New High Index</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">eligible_stocks: 61; successful_stocks: 8; success_rate: 13.1%</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#new-highs-today-count">New Highs Today</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">new_highs_count: 16; total_symbols: 5841; threshold: 100</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-daily-trend-status">QQQ Daily Trend</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">symbol: QQQ; weekly_close: 422.67; ma_10w: 490.52</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#spy-daily-trend-status">SPY Daily Trend</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">symbol: SPY; weekly_close: 505.28; ma_10w: 571.69</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-weekly-trend-status">QQQ Weekly Trend</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">symbol: QQQ; ma_10w_rising: False; ma_30w_rising: False</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#mtum-vs-50-day-moving-average">MTUM vs 50-Day MA</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">current_price: 199.79; ma_50: 210.67; ma_rising: False</div>
                </div>
            
        </div>
        <div class="section">
            <h2>V2 Components</h2>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#more-new-highs-than-new-lows-today">V2 New Highs vs Lows</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">new_highs_count: 6; new_lows_count: 551; result: Fail</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-above-10-week">V2 QQQ Above 10-Week</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">current_close: 466.00; 10_week_ma: 490.52; result: Fail</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-above-4-week">V2 QQQ Above 4-Week</a></span>
                        <span class="component-status pass">PASS</span>
                    </div>
                    <div class="component-details">current_close: 466.00; 4_week_ma: 459.61; result: Pass</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-above-10-day">V2 QQQ Above 10-Day</a></span>
                        <span class="component-status pass">PASS</span>
                    </div>
                    <div class="component-details">current_close: 466.00; 10_day_ma: 454.74; result: Pass</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-ma-alignment">V2 QQQ MA Alignment</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">4_week_ma: 459.61; 10_week_ma: 490.52; 30_week_ma: 501.87</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-stochastic-10-4-oversold">V2 QQQ Stochastic [10,4] Oversold</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">stoch_k: 28.49; stoch_d: 19.16; threshold: 20</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-macd-rising">V2 QQQ MACD Rising</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">current_histogram: -2.62; prev_histogram: -5.62; prev2_histogram: -4.69</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-stochastic-10-4-4">V2 QQQ Stochastic [10,4,4]</a></span>
                        <span class="component-status pass">PASS</span>
                    </div>
                    <div class="component-details">stoch_k_fast: 28.49; stoch_d_slow: 20.34; fast_above_slow: 1</div>
                </div>
            
                <div class="component">
                    <div class="component-header">
                        <span class="component-name"><a href="#qqq-stochastic-10-1-oversold">V2 QQQ Stochastic [10,1] Oversold</a></span>
                        <span class="component-status fail">FAIL</span>
                    </div>
                    <div class="component-details">stoch_k: 75.56; stoch_d: 37.99; threshold: 20</div>
                </div>
            
        </div>
        <div class="section">
            <h2>Aggregate Metrics</h2>
            
                <div class="metric">
                    <div class="metric-name"><a href="#consecutive-days-qqq-above-ema-21">QQQ EMA 21 Streak</a></div>
                    <div class="metric-value">1</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#consecutive-weeks-qqq-above-10-week-average">QQQ Weekly 10MA Streak</a></div>
                    <div class="metric-value">0</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#consecutive-weeks-spy-above-10-week-average">SPY Weekly 10MA Streak</a></div>
                    <div class="metric-value">0</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#consecutive-weeks-qqq-ma-hierarchy-bullish">QQQ Weekly Trend Streak</a></div>
                    <div class="metric-value">0</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#percentage-of-stocks-above-40-day-sma">Stocks Above 40-Day SMA %</a></div>
                    <div class="metric-value">11.7%</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#nasdaq-100-stocks-above-macd-signal-line">% NASDAQ 100 Above MACD Signal</a></div>
                    <div class="metric-value">9.0%</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#qqq-weekly-stochastic-reading">QQQ Weekly Stochastic</a></div>
                    <div class="metric-value">N/A</div>
                </div>
            
                <div class="metric">
                    <div class="metric-name"><a href="#daily-market-advance-decline-statistics">Advance Decline Metrics</a></div>
                    <div class="metric-value">N/A</div>
                </div>
            
        </div>
        
        <div class="section explanations-section">
            <h2>üìä KPI & Metrics Explanations</h2>
            <p class="explanations-intro">
                This section provides detailed explanations of all Key Performance Indicators (KPIs) and metrics used in the Macro Scorecard analysis. 
                Understanding these components helps interpret the market health assessment and scoring methodology.
            </p>
        
            <div class="explanation-category">
                <h3>üîµ V1 Scorecard Components (Original)</h3>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="10-day-successful-new-high-index">10-Day Successful New High Index</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Measures the success rate of stocks that made new highs 10 trading days ago.</p>
            <div class="component-current-values"><strong>Current Values:</strong> eligible_stocks: 61 ‚Ä¢ successful_stocks: 8 ‚Ä¢ success_rate: 13.1%</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Identify all stocks that made a 52-week high exactly 10 trading days ago</li><li>2. Compare today's closing price to the closing price 10 days ago for each stock</li><li>3. Calculate success rate: (Stocks with current close ‚â• D-10 close) √∑ (Total eligible stocks)</li><li>4. Requires minimum 20 eligible stocks for validity</li><li>5. Passes if success rate ‚â• 50%</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>A high success rate indicates sustained momentum and market strength. Stocks making new highs should continue to perform well in healthy markets.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if both valid (‚â•20 stocks) AND healthy (‚â•50% success rate)</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>This indicator measures follow-through strength after breakouts, which is a key sign of market health.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="new-highs-today-count">New Highs Today Count</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Counts the number of stocks making new highs on the current trading day.</p>
            <div class="component-current-values"><strong>Current Values:</strong> new_highs_count: 16 ‚Ä¢ total_symbols: 5841 ‚Ä¢ threshold: 100</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Identify stocks making new highs today (52-week or all-time configurable)</li><li>2. Compare against historical prices using high or close price (configurable)</li><li>3. Optional volume confirmation: today's volume ‚â• 120% of 50-day average volume</li><li>4. Count total qualifying stocks</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>A healthy market should have significant breadth with many stocks participating in upward moves. ‚â•100 stocks making new highs indicates broad market participation.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if ‚â•100 stocks make new highs</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Market breadth is crucial - a few large stocks can't carry the entire market sustainably.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="qqq-daily-trend-status">QQQ Daily Trend Status</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Evaluates NASDAQ-100 trend using weekly moving averages, checked every trading day.</p>
            <div class="component-current-values"><strong>Current Values:</strong> symbol: QQQ ‚Ä¢ weekly_close: 422.67 ‚Ä¢ ma_10w: 490.52</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Calculate weekly closes for QQQ (Friday or last trading day of week)</li><li>2. Calculate 10-week and 30-week moving averages of weekly closes</li><li>3. Each trading day, use the most recent weekly close and moving averages</li><li>4. Apply trend criteria: Weekly close ‚â• 30-week MA AND 10-week MA ‚â• 30-week MA</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Technology stocks (NASDAQ) often lead market moves. Strong QQQ trend indicates healthy market leadership in growth sectors. This component updates every trading day using the latest weekly data.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if trend criteria are met (Lenient: Weekly close ‚â• 30-week MA AND 10-week MA ‚â• 30-week MA; Strict: + rising MAs)</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>QQQ represents the innovation and growth engine of the US market. Daily evaluation provides immediate feedback on trend changes.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="spy-daily-trend-status">SPY Daily Trend Status</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Evaluates S&P 500 trend using identical methodology to QQQ Daily Trend.</p>
            <div class="component-current-values"><strong>Current Values:</strong> symbol: SPY ‚Ä¢ weekly_close: 505.28 ‚Ä¢ ma_10w: 571.69</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Same methodology as QQQ Daily Trend</li><li>2. Uses SPY weekly closes instead of QQQ</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Broad market health assessment through the most widely followed market index representing 500 largest US companies.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if trend criteria are met (same as QQQ)</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>SPY provides the foundational broad market trend confirmation.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="qqq-weekly-trend-status">QQQ Weekly Trend Status</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Weekly-specific evaluation of QQQ trend, only evaluated on week-end days (Friday or last trading day).</p>
            <div class="component-current-values"><strong>Current Values:</strong> symbol: QQQ ‚Ä¢ ma_10w_rising: False ‚Ä¢ ma_30w_rising: False</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Only evaluates on Friday (or last trading day of the week if Friday is a holiday)</li><li>2. Calculate weekly closes for QQQ</li><li>3. Calculate 10-week and 30-week moving averages of weekly closes</li><li>4. Apply trend criteria: Weekly close ‚â• 30-week MA AND 10-week MA ‚â• 30-week MA</li><li>5. On non-week-end days (Mon-Thu), returns 0 with note 'Not evaluated today'</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Provides weekly perspective confirmation of QQQ trend status. Unlike the Daily version, this only updates once per week, filtering out intra-week noise and confirming the medium-term trend.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if weekly trend criteria are met (on week-end days only)</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Weekly-only analysis ensures the signal is based on completed weekly data, avoiding premature signals from incomplete weeks.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="mtum-vs-50-day-moving-average">MTUM vs 50-Day Moving Average</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Evaluates momentum factor performance relative to its moving average.</p>
            <div class="component-current-values"><strong>Current Values:</strong> current_price: 199.79 ‚Ä¢ ma_50: 210.67 ‚Ä¢ ma_rising: False</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Compare MTUM current price to its 50-day moving average</li><li>2. Optionally require the 50-day MA to be rising (slope > epsilon)</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Momentum factors performing well indicates market participants are rewarding growth and momentum, suggesting risk-on sentiment.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if above 50-day MA AND (if configured) MA is rising</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>MTUM outperformance signals that investors are favoring growth over defensive strategies.</p>
                </div>
            </div>
        </div>
        </div>
            <div class="explanation-category">
                <h3>üü£ V2 Scorecard Components (New)</h3>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="more-new-highs-than-new-lows-today">More New Highs than New Lows Today</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Compares the count of stocks making new highs versus new lows on the current trading day.</p>
            <div class="component-current-values"><strong>Current Values:</strong> new_highs_count: 6 ‚Ä¢ new_lows_count: 551 ‚Ä¢ result: Fail</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Count stocks making new highs today (same universe as V1)</li><li>2. Count stocks making new lows today (all-time lows, using low price field)</li><li>3. Compare: New Highs > New Lows</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>When more stocks are making new highs than new lows, it indicates broad market strength and positive momentum across the market.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if New Highs > New Lows</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Market breadth indicator showing whether strength or weakness is more prevalent.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item">
            <div class="explanation-header">
                <h4 id="qqq-macd-histogram-rising">QQQ MACD Histogram Rising</h4>
                <span class="explanation-score fail">FAIL</span>
            </div>
            <p class="explanation-description">Evaluates MACD histogram momentum for QQQ to identify trend acceleration.</p>
            <div class="component-current-values"><strong>Current Values:</strong> current_histogram: -2.62 ‚Ä¢ prev_histogram: -5.62 ‚Ä¢ prev2_histogram: -4.69</div>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
                    <ul>
        <li>1. Calculate MACD [12,26,9] for QQQ</li><li>2. Check if histogram is rising over last two days OR positive (> 0)</li>
                    </ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Rising MACD histogram indicates increasing bullish momentum. Positive histogram confirms bullish momentum is present.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Scoring:</strong>
                    <p>1 point if histogram is rising in last 2 days OR > 0</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>MACD histogram shows the rate of change in momentum - rising indicates accelerating bullish momentum.</p>
                </div>
            </div>
        </div>
        </div>
            <div class="explanation-category">
                <h3>üìà Aggregate Metrics</h3>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="consecutive-days-qqq-above-ema-21">Consecutive Days QQQ Above EMA 21</h4>
                <span class="metric-current-value">1 Days</span>
            </div>
            <p class="explanation-description">Current unbroken streak of days QQQ has closed above its 21-day Exponential Moving Average.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. Work backwards from today</li><li>2. Count consecutive days where QQQ close > EMA 21</li><li>3. Stop counting when QQQ closes below EMA 21</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Longer streaks indicate sustained bullish momentum. The 21-day EMA is a key short-to-medium term trend indicator.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Persistence above key moving averages shows trend strength and durability.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="consecutive-weeks-qqq-above-10-week-average">Consecutive Weeks QQQ Above 10-Week Average</h4>
                <span class="metric-current-value">0 Weeks</span>
            </div>
            <p class="explanation-description">Current unbroken streak of weeks QQQ has closed above its 10-week moving average.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. Work backwards from current week</li><li>2. Count consecutive weeks where QQQ weekly close > 10-week MA</li><li>3. Stop counting when QQQ closes below 10-week MA</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Weekly streaks show medium-term trend persistence. 10-week MA is approximately 2.5 months of data.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Weekly analysis filters daily noise and shows sustainable trend strength.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="consecutive-weeks-spy-above-10-week-average">Consecutive Weeks SPY Above 10-Week Average</h4>
                <span class="metric-current-value">0 Weeks</span>
            </div>
            <p class="explanation-description">Current unbroken streak of weeks SPY has closed above its 10-week moving average.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. Same methodology as QQQ weekly streak</li><li>2. Applied to SPY instead of QQQ</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Shows broad market trend persistence through the S&P 500. Complements QQQ streak for full market picture.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>SPY represents broad market health while QQQ represents growth/tech leadership.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="percentage-of-stocks-above-40-day-sma">Percentage of Stocks Above 40-Day SMA</h4>
                <span class="metric-current-value">11.74 Percentage</span>
            </div>
            <p class="explanation-description">Percentage of stocks in the universe currently trading above their 40-day Simple Moving Average.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. For each stock in universe, check if current close > 40-day SMA</li><li>2. Calculate: (Stocks above SMA 40) √∑ (Total stocks) √ó 100</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>High percentages (>70%) indicate broad market strength. Low percentages (<30%) suggest widespread weakness.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Breadth indicator showing what percentage of the market is in short-term uptrends.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="%-nasdaq-100-stocks-above-macd-signal-line">% NASDAQ 100 Stocks Above MACD Signal Line</h4>
                <span class="metric-current-value">9 Percentage (shown as count/total)</span>
            </div>
            <p class="explanation-description">Percentage of NASDAQ 100 constituent stocks currently above their MACD signal line.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. Fetch current NASDAQ 100 constituents (from stocks.nasdaq100_constituent)</li><li>2. Calculate MACD [12,26,9] for each stock</li><li>3. Count stocks where MACD line > MACD signal line</li><li>4. Display as count/total with percentage (e.g., 62/96 (64.6%))</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Higher percentages indicate broad momentum among leading technology stocks. Tracks momentum breadth in growth leaders.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>NASDAQ 100 represents market leadership - broad momentum here suggests healthy market leadership. Note: Uses current constituency only.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="qqq-weekly-stochastic-reading">QQQ Weekly Stochastic Reading</h4>
                <span class="metric-current-value">N/A 0-100 scale</span>
            </div>
            <p class="explanation-description">Current weekly stochastic oscillator reading for QQQ using 10-period lookback.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>1. Calculate weekly stochastic [10,4,3] for QQQ</li><li>2. Report current %K value</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Values >80 = overbought (strong but potentially extended), Values <20 = oversold (potentially undervalued), Values 20-80 = neutral zone</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Weekly stochastic helps identify when QQQ might be extended in either direction on a weekly basis.</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-item metric-explanation">
            <div class="explanation-header">
                <h4 id="daily-market-advance-decline-statistics">Daily Market Advance/Decline Statistics</h4>
                <span class="metric-current-value">N/A Count, Ratio, Net</span>
            </div>
            <p class="explanation-description">Comprehensive advance/decline statistics for the trading day across all tracked stocks.</p>
            
            <div class="explanation-details">
                <div class="explanation-section">
                    <strong>Calculation Method:</strong>
        <ul><li>Simple Count: Advancers - Decliners</li><li>Ratio: Advancers √∑ Decliners</li><li>Net: Total advancing stocks minus total declining stocks</li></ul>
                </div>
                
                <div class="explanation-section">
                    <strong>Interpretation:</strong>
                    <p>Positive readings indicate more stocks rose than fell. Ratios >1.0 are bullish, <1.0 are bearish. Shows internal market strength.</p>
                </div>
                
                <div class="explanation-section">
                    <strong>Business Logic:</strong>
                    <p>Advance/decline data shows the internal health of the market beyond just price index movements.</p>
                </div>
            </div>
        </div>
        </div></div>
        <div class="footer">
            Generated on 2026-01-26 20:00 UTC
        </div>
    </div>
    <script>
        // Chart data
        const spyData = {"symbol": "SPY", "data": [{"date": "2025-01-08", "open": 588.7, "high": 590.58, "low": 585.2, "close": 589.49, "volume": 47304672, "ema_8": 591.06, "ema_21": 593.81, "sma_50": 593.75, "bb_upper": 611.21, "bb_middle": 595.51, "bb_lower": 579.8}, {"date": "2025-01-10", "open": 585.88, "high": 585.95, "low": 578.55, "close": 580.49, "volume": 73105046, "ema_8": 588.71, "ema_21": 592.6, "sma_50": 593.75, "bb_upper": 611.05, "bb_middle": 594.39, "bb_lower": 577.73}, {"date": "2025-01-13", "open": 575.77, "high": 581.75, "low": 575.35, "close": 581.39, "volume": 47910060, "ema_8": 587.08, "ema_21": 591.58, "sma_50": 593.74, "bb_upper": 609.52, "bb_middle": 593.09, "bb_lower": 576.65}, {"date": "2025-01-14", "open": 584.36, "high": 585.0, "low": 578.35, "close": 582.19, "volume": 48420580, "ema_8": 586.0, "ema_21": 590.73, "sma_50": 593.78, "bb_upper": 608.21, "bb_middle": 591.98, "bb_lower": 575.75}, {"date": "2025-01-15", "open": 590.33, "high": 593.94, "low": 589.2, "close": 592.78, "volume": 56900159, "ema_8": 587.5, "ema_21": 590.91, "sma_50": 594.27, "bb_upper": 606.59, "bb_middle": 591.41, "bb_lower": 576.22}, {"date": "2025-01-16", "open": 594.17, "high": 594.35, "low": 590.93, "close": 591.64, "volume": 43319662, "ema_8": 588.42, "ema_21": 590.98, "sma_50": 594.68, "bb_upper": 604.01, "bb_middle": 590.65, "bb_lower": 577.29}, {"date": "2025-01-17", "open": 596.96, "high": 599.36, "low": 595.61, "close": 597.58, "volume": 58070628, "ema_8": 590.46, "ema_21": 591.58, "sma_50": 595.23, "bb_upper": 602.52, "bb_middle": 590.32, "bb_lower": 578.11}, {"date": "2025-01-21", "open": 600.67, "high": 603.06, "low": 598.67, "close": 603.05, "volume": 42532853, "ema_8": 593.26, "ema_21": 592.62, "sma_50": 595.76, "bb_upper": 604.44, "bb_middle": 591.15, "bb_lower": 577.86}, {"date": "2025-01-22", "open": 605.92, "high": 607.82, "low": 605.36, "close": 606.44, "volume": 48195973, "ema_8": 596.19, "ema_21": 593.88, "sma_50": 596.07, "bb_upper": 606.87, "bb_middle": 592.17, "bb_lower": 577.47}, {"date": "2025-01-23", "open": 605.8, "high": 609.75, "low": 605.52, "close": 609.75, "volume": 41152102, "ema_8": 599.2, "ema_21": 595.32, "sma_50": 596.35, "bb_upper": 609.75, "bb_middle": 593.1, "bb_lower": 576.45}, {"date": "2025-01-24", "open": 609.81, "high": 610.78, "low": 606.8, "close": 607.97, "volume": 34604693, "ema_8": 601.15, "ema_21": 596.47, "sma_50": 596.55, "bb_upper": 611.69, "bb_middle": 593.77, "bb_lower": 575.84}, {"date": "2025-01-27", "open": 594.81, "high": 599.69, "low": 594.64, "close": 599.37, "volume": 70361125, "ema_8": 600.75, "ema_21": 596.73, "sma_50": 596.56, "bb_upper": 611.45, "bb_middle": 593.67, "bb_lower": 575.89}, {"date": "2025-01-28", "open": 600.62, "high": 605.37, "low": 597.25, "close": 604.52, "volume": 44433322, "ema_8": 601.59, "ema_21": 597.44, "sma_50": 596.71, "bb_upper": 611.95, "bb_middle": 593.83, "bb_lower": 575.71}, {"date": "2025-01-29", "open": 603.72, "high": 604.13, "low": 599.22, "close": 601.81, "volume": 37177429, "ema_8": 601.64, "ema_21": 597.84, "sma_50": 596.8, "bb_upper": 612.63, "bb_middle": 594.17, "bb_lower": 575.7}, {"date": "2025-01-30", "open": 603.96, "high": 606.6, "low": 600.72, "close": 605.04, "volume": 39281255, "ema_8": 602.4, "ema_21": 598.49, "sma_50": 597.04, "bb_upper": 613.86, "bb_middle": 595.01, "bb_lower": 576.16}, {"date": "2025-01-31", "open": 607.5, "high": 609.96, "low": 601.05, "close": 601.82, "volume": 66671471, "ema_8": 602.27, "ema_21": 598.8, "sma_50": 597.36, "bb_upper": 614.39, "bb_middle": 595.8, "bb_lower": 577.2}, {"date": "2025-02-03", "open": 592.67, "high": 600.29, "low": 590.49, "close": 597.77, "volume": 65857248, "ema_8": 601.27, "ema_21": 598.7, "sma_50": 597.55, "bb_upper": 614.3, "bb_middle": 596.45, "bb_lower": 578.6}, {"date": "2025-02-04", "open": 597.83, "high": 602.3, "low": 597.28, "close": 601.78, "volume": 33457815, "ema_8": 601.38, "ema_21": 598.98, "sma_50": 597.78, "bb_upper": 614.81, "bb_middle": 596.94, "bb_lower": 579.07}, {"date": "2025-02-05", "open": 600.64, "high": 604.37, "low": 598.58, "close": 604.22, "volume": 30653149, "ema_8": 602.01, "ema_21": 599.46, "sma_50": 598.06, "bb_upper": 615.53, "bb_middle": 597.39, "bb_lower": 579.24}, {"date": "2025-02-06", "open": 605.99, "high": 606.45, "low": 602.63, "close": 606.32, "volume": 35771503, "ema_8": 602.97, "ema_21": 600.08, "sma_50": 598.31, "bb_upper": 616.34, "bb_middle": 598.27, "bb_lower": 580.2}, {"date": "2025-02-07", "open": 606.89, "high": 608.13, "low": 600.05, "close": 600.77, "volume": 50788516, "ema_8": 602.48, "ema_21": 600.14, "sma_50": 598.41, "bb_upper": 616.45, "bb_middle": 598.84, "bb_lower": 581.22}, {"date": "2025-02-10", "open": 604.03, "high": 605.5, "low": 602.74, "close": 604.85, "volume": 26048714, "ema_8": 603.01, "ema_21": 600.57, "sma_50": 598.56, "bb_upper": 615.57, "bb_middle": 600.05, "bb_lower": 584.54}, {"date": "2025-02-11", "open": 602.55, "high": 605.86, "low": 602.43, "close": 605.31, "volume": 30056740, "ema_8": 603.52, "ema_21": 601.0, "sma_50": 598.65, "bb_upper": 614.18, "bb_middle": 601.25, "bb_lower": 588.32}, {"date": "2025-02-12", "open": 599.2, "high": 604.55, "low": 598.51, "close": 603.36, "volume": 45076076, "ema_8": 603.48, "ema_21": 601.22, "sma_50": 598.74, "bb_upper": 611.63, "bb_middle": 602.31, "bb_lower": 592.98}, {"date": "2025-02-13", "open": 604.48, "high": 609.94, "low": 603.2, "close": 609.73, "volume": 40921297, "ema_8": 604.87, "ema_21": 601.99, "sma_50": 598.89, "bb_upper": 611.9, "bb_middle": 603.15, "bb_lower": 594.41}, {"date": "2025-02-14", "open": 609.94, "high": 610.99, "low": 609.07, "close": 609.7, "volume": 26910448, "ema_8": 605.94, "ema_21": 602.69, "sma_50": 599.01, "bb_upper": 611.41, "bb_middle": 604.06, "bb_lower": 596.7}, {"date": "2025-02-18", "open": 610.88, "high": 611.49, "low": 608.38, "close": 611.49, "volume": 26749030, "ema_8": 607.18, "ema_21": 603.49, "sma_50": 599.16, "bb_upper": 612.16, "bb_middle": 604.75, "bb_lower": 597.35}, {"date": "2025-02-19", "open": 610.08, "high": 613.23, "low": 609.56, "close": 612.93, "volume": 31011072, "ema_8": 608.46, "ema_21": 604.35, "sma_50": 599.27, "bb_upper": 613.45, "bb_middle": 605.25, "bb_lower": 597.04}, {"date": "2025-02-20", "open": 611.54, "high": 611.68, "low": 607.02, "close": 610.38, "volume": 36554002, "ema_8": 608.88, "ema_21": 604.9, "sma_50": 599.34, "bb_upper": 613.95, "bb_middle": 605.44, "bb_lower": 596.94}, {"date": "2025-02-21", "open": 610.16, "high": 610.3, "low": 599.47, "close": 599.94, "volume": 76519818, "ema_8": 606.9, "ema_21": 604.45, "sma_50": 599.18, "bb_upper": 613.55, "bb_middle": 604.95, "bb_lower": 596.36}, {"date": "2025-02-24", "open": 602.02, "high": 603.03, "low": 596.49, "close": 597.21, "volume": 50737213, "ema_8": 604.74, "ema_21": 603.79, "sma_50": 599.03, "bb_upper": 613.54, "bb_middle": 604.42, "bb_lower": 595.29}, {"date": "2025-02-25", "open": 597.15, "high": 597.89, "low": 589.56, "close": 594.24, "volume": 58266472, "ema_8": 602.41, "ema_21": 602.92, "sma_50": 598.86, "bb_upper": 614.13, "bb_middle": 604.16, "bb_lower": 594.19}, {"date": "2025-02-26", "open": 595.93, "high": 599.58, "low": 591.86, "close": 594.54, "volume": 43321578, "ema_8": 600.66, "ema_21": 602.16, "sma_50": 598.6, "bb_upper": 614.52, "bb_middle": 603.66, "bb_lower": 592.8}, {"date": "2025-02-27", "open": 596.85, "high": 598.02, "low": 584.65, "close": 585.05, "volume": 74196664, "ema_8": 597.19, "ema_21": 600.6, "sma_50": 598.22, "bb_upper": 616.5, "bb_middle": 602.82, "bb_lower": 589.14}, {"date": "2025-02-28", "open": 585.56, "high": 594.72, "low": 582.44, "close": 594.18, "volume": 88744106, "ema_8": 596.52, "ema_21": 600.02, "sma_50": 598.02, "bb_upper": 616.44, "bb_middle": 602.28, "bb_lower": 588.12}, {"date": "2025-03-03", "open": 596.18, "high": 597.34, "low": 579.9, "close": 583.77, "volume": 74249199, "ema_8": 593.69, "ema_21": 598.54, "sma_50": 597.56, "bb_upper": 617.79, "bb_middle": 601.38, "bb_lower": 584.97}, {"date": "2025-03-04", "open": 579.71, "high": 585.39, "low": 572.25, "close": 576.86, "volume": 109648212, "ema_8": 589.95, "ema_21": 596.57, "sma_50": 597.01, "bb_upper": 620.04, "bb_middle": 600.33, "bb_lower": 580.62}, {"date": "2025-03-05", "open": 576.69, "high": 584.88, "low": 573.08, "close": 583.06, "volume": 71230528, "ema_8": 588.42, "ema_21": 595.34, "sma_50": 596.95, "bb_upper": 620.54, "bb_middle": 599.4, "bb_lower": 578.25}, {"date": "2025-03-06", "open": 575.48, "high": 580.17, "low": 570.12, "close": 572.71, "volume": 80094868, "ema_8": 584.93, "ema_21": 593.29, "sma_50": 596.68, "bb_upper": 621.94, "bb_middle": 597.82, "bb_lower": 573.7}, {"date": "2025-03-07", "open": 570.9, "high": 577.39, "low": 565.63, "close": 575.92, "volume": 81158816, "ema_8": 582.93, "ema_21": 591.71, "sma_50": 596.37, "bb_upper": 621.95, "bb_middle": 596.3, "bb_lower": 570.65}, {"date": "2025-03-10", "open": 567.59, "high": 569.54, "low": 555.59, "close": 560.58, "volume": 99326624, "ema_8": 577.96, "ema_21": 588.88, "sma_50": 595.69, "bb_upper": 624.38, "bb_middle": 594.29, "bb_lower": 564.21}, {"date": "2025-03-11", "open": 559.4, "high": 564.02, "low": 552.02, "close": 555.92, "volume": 88102109, "ema_8": 573.06, "ema_21": 585.88, "sma_50": 594.78, "bb_upper": 626.0, "bb_middle": 591.84, "bb_lower": 557.69}, {"date": "2025-03-12", "open": 562.17, "high": 563.11, "low": 553.69, "close": 558.87, "volume": 69588167, "ema_8": 569.91, "ema_21": 583.43, "sma_50": 593.93, "bb_upper": 626.05, "bb_middle": 589.52, "bb_lower": 552.99}, {"date": "2025-03-13", "open": 558.49, "high": 559.11, "low": 549.68, "close": 551.42, "volume": 74079414, "ema_8": 565.8, "ema_21": 580.52, "sma_50": 593.06, "bb_upper": 626.57, "bb_middle": 586.92, "bb_lower": 547.28}, {"date": "2025-03-14", "open": 556.11, "high": 563.83, "low": 551.49, "close": 562.81, "volume": 62660321, "ema_8": 565.14, "ema_21": 578.91, "sma_50": 592.55, "bb_upper": 624.09, "bb_middle": 584.58, "bb_lower": 545.07}, {"date": "2025-03-17", "open": 562.79, "high": 569.71, "low": 562.35, "close": 567.15, "volume": 49008709, "ema_8": 565.58, "ema_21": 577.84, "sma_50": 592.17, "bb_upper": 620.83, "bb_middle": 582.45, "bb_lower": 544.07}, {"date": "2025-03-18", "open": 564.8, "high": 565.02, "low": 559.06, "close": 561.02, "volume": 66041422, "ema_8": 564.57, "ema_21": 576.31, "sma_50": 591.7, "bb_upper": 616.88, "bb_middle": 579.93, "bb_lower": 542.98}, {"date": "2025-03-19", "open": 562.83, "high": 570.95, "low": 561.63, "close": 567.13, "volume": 66555985, "ema_8": 565.14, "ema_21": 575.47, "sma_50": 591.21, "bb_upper": 611.53, "bb_middle": 577.64, "bb_lower": 543.75}, {"date": "2025-03-20", "open": 563.33, "high": 570.57, "low": 562.6, "close": 565.49, "volume": 62958195, "ema_8": 565.22, "ema_21": 574.57, "sma_50": 590.61, "bb_upper": 605.93, "bb_middle": 575.39, "bb_lower": 544.85}, {"date": "2025-03-21", "open": 559.28, "high": 564.89, "low": 558.03, "close": 563.98, "volume": 83762964, "ema_8": 564.94, "ema_21": 573.6, "sma_50": 590.12, "bb_upper": 602.23, "bb_middle": 573.6, "bb_lower": 544.96}, {"date": "2025-03-24", "open": 570.8, "high": 575.15, "low": 570.2, "close": 574.08, "volume": 58766795, "ema_8": 566.97, "ema_21": 573.65, "sma_50": 589.81, "bb_upper": 598.84, "bb_middle": 572.44, "bb_lower": 546.04}, {"date": "2025-03-25", "open": 575.3, "high": 576.41, "low": 573.69, "close": 575.46, "volume": 38355735, "ema_8": 568.86, "ema_21": 573.81, "sma_50": 589.71, "bb_upper": 595.89, "bb_middle": 571.5, "bb_lower": 547.11}, {"date": "2025-03-26", "open": 575.19, "high": 576.33, "low": 567.19, "close": 568.59, "volume": 52228898, "ema_8": 568.8, "ema_21": 573.34, "sma_50": 589.45, "bb_upper": 592.06, "bb_middle": 570.2, "bb_lower": 548.34}, {"date": "2025-03-27", "open": 567.18, "high": 570.9, "low": 564.94, "close": 567.08, "volume": 42164248, "ema_8": 568.42, "ema_21": 572.77, "sma_50": 589.15, "bb_upper": 590.04, "bb_middle": 569.3, "bb_lower": 548.57}, {"date": "2025-03-28", "open": 565.53, "high": 566.27, "low": 555.07, "close": 555.66, "volume": 71662653, "ema_8": 565.58, "ema_21": 571.21, "sma_50": 588.41, "bb_upper": 585.36, "bb_middle": 567.38, "bb_lower": 549.4}, {"date": "2025-03-31", "open": 549.83, "high": 560.71, "low": 546.87, "close": 559.39, "volume": 95328213, "ema_8": 564.21, "ema_21": 570.14, "sma_50": 587.76, "bb_upper": 582.71, "bb_middle": 566.16, "bb_lower": 549.61}, {"date": "2025-04-01", "open": 557.45, "high": 562.94, "low": 553.68, "close": 560.97, "volume": 54609641, "ema_8": 563.49, "ema_21": 569.3, "sma_50": 587.03, "bb_upper": 581.27, "bb_middle": 565.36, "bb_lower": 549.46}, {"date": "2025-04-02", "open": 555.05, "high": 567.42, "low": 554.81, "close": 564.52, "volume": 76014544, "ema_8": 563.72, "ema_21": 568.87, "sma_50": 586.26, "bb_upper": 577.98, "bb_middle": 564.44, "bb_lower": 550.89}, {"date": "2025-04-03", "open": 545.11, "high": 547.97, "low": 536.7, "close": 536.7, "volume": 125985998, "ema_8": 557.71, "ema_21": 565.95, "sma_50": 584.86, "bb_upper": 580.45, "bb_middle": 562.64, "bb_lower": 544.82}, {"date": "2025-04-04", "open": 523.67, "high": 525.87, "low": 505.06, "close": 505.28, "volume": 217965131, "ema_8": 546.06, "ema_21": 560.43, "sma_50": 582.77, "bb_upper": 589.44, "bb_middle": 559.1, "bb_lower": 528.77}, {"date": "2025-04-07", "open": 489.19, "high": 523.17, "low": 481.8, "close": 504.38, "volume": 256611355, "ema_8": 536.8, "ema_21": 555.33, "sma_50": 580.7, "bb_upper": 595.25, "bb_middle": 556.29, "bb_lower": 517.34}, {"date": "2025-04-08", "open": 521.86, "high": 524.98, "low": 489.16, "close": 496.48, "volume": 165816581, "ema_8": 527.84, "ema_21": 549.98, "sma_50": 578.64, "bb_upper": 600.58, "bb_middle": 553.32, "bb_lower": 506.07}, {"date": "2025-04-09", "open": 493.44, "high": 548.62, "low": 493.05, "close": 548.62, "volume": 241867317, "ema_8": 532.46, "ema_21": 549.86, "sma_50": 577.53, "bb_upper": 600.04, "bb_middle": 552.81, "bb_lower": 505.59}]};
        const qqqData = {"symbol": "QQQ", "data": [{"date": "2025-01-08", "open": 515.08, "high": 516.92, "low": 510.57, "close": 515.27, "volume": 30777777, "ema_8": 517.84, "ema_21": 518.83, "sma_50": 512.8, "bb_upper": 538.47, "bb_middle": 522.32, "bb_lower": 506.18}, {"date": "2025-01-10", "open": 511.48, "high": 511.58, "low": 503.92, "close": 507.19, "volume": 40532495, "ema_8": 515.48, "ema_21": 517.77, "sma_50": 513.03, "bb_upper": 539.15, "bb_middle": 521.65, "bb_lower": 504.15}, {"date": "2025-01-13", "open": 501.2, "high": 506.02, "low": 499.7, "close": 505.56, "volume": 31694210, "ema_8": 513.27, "ema_21": 516.66, "sma_50": 513.14, "bb_upper": 538.88, "bb_middle": 520.43, "bb_lower": 501.99}, {"date": "2025-01-14", "open": 508.74, "high": 510.15, "low": 501.59, "close": 505.08, "volume": 33737237, "ema_8": 511.45, "ema_21": 515.61, "sma_50": 513.32, "bb_upper": 538.79, "bb_middle": 519.36, "bb_lower": 499.94}, {"date": "2025-01-15", "open": 513.03, "high": 517.85, "low": 511.46, "close": 516.7, "volume": 34957554, "ema_8": 512.62, "ema_21": 515.71, "sma_50": 513.97, "bb_upper": 537.39, "bb_middle": 518.67, "bb_lower": 499.95}, {"date": "2025-01-16", "open": 518.98, "high": 519.06, "low": 512.95, "close": 513.08, "volume": 28229037, "ema_8": 512.72, "ema_21": 515.47, "sma_50": 514.49, "bb_upper": 533.86, "bb_middle": 517.42, "bb_lower": 500.97}, {"date": "2025-01-17", "open": 522.85, "high": 524.07, "low": 513.11, "close": 521.74, "volume": 51837941, "ema_8": 514.72, "ema_21": 516.04, "sma_50": 515.2, "bb_upper": 530.9, "bb_middle": 516.71, "bb_lower": 502.53}, {"date": "2025-01-21", "open": 524.48, "high": 525.97, "low": 520.06, "close": 524.8, "volume": 23627971, "ema_8": 516.96, "ema_21": 516.84, "sma_50": 515.85, "bb_upper": 531.76, "bb_middle": 517.13, "bb_lower": 502.5}, {"date": "2025-01-22", "open": 529.57, "high": 533.82, "low": 529.26, "close": 531.51, "volume": 33592988, "ema_8": 520.2, "ema_21": 518.17, "sma_50": 516.37, "bb_upper": 533.89, "bb_middle": 518.0, "bb_lower": 502.1}, {"date": "2025-01-23", "open": 529.04, "high": 532.76, "low": 528.45, "close": 532.64, "volume": 23096588, "ema_8": 522.96, "ema_21": 519.49, "sma_50": 516.75, "bb_upper": 535.89, "bb_middle": 518.7, "bb_lower": 501.5}, {"date": "2025-01-24", "open": 533.02, "high": 533.79, "low": 528.15, "close": 529.63, "volume": 19878251, "ema_8": 524.44, "ema_21": 520.41, "sma_50": 517.06, "bb_upper": 536.83, "bb_middle": 519.03, "bb_lower": 501.24}, {"date": "2025-01-27", "open": 511.0, "high": 517.99, "low": 510.15, "close": 514.21, "volume": 60771695, "ema_8": 522.17, "ema_21": 519.84, "sma_50": 517.07, "bb_upper": 535.39, "bb_middle": 518.25, "bb_lower": 501.11}, {"date": "2025-01-28", "open": 515.22, "high": 523.0, "low": 511.78, "close": 521.81, "volume": 33194214, "ema_8": 522.09, "ema_21": 520.02, "sma_50": 517.25, "bb_upper": 534.25, "bb_middle": 517.86, "bb_lower": 501.46}, {"date": "2025-01-29", "open": 522.46, "high": 522.59, "low": 516.9, "close": 520.83, "volume": 26649011, "ema_8": 521.81, "ema_21": 520.1, "sma_50": 517.42, "bb_upper": 534.08, "bb_middle": 517.77, "bb_lower": 501.46}, {"date": "2025-01-30", "open": 523.71, "high": 526.1, "low": 518.21, "close": 523.05, "volume": 27431302, "ema_8": 522.09, "ema_21": 520.37, "sma_50": 517.71, "bb_upper": 534.58, "bb_middle": 518.14, "bb_lower": 501.71}, {"date": "2025-01-31", "open": 526.92, "high": 531.52, "low": 521.19, "close": 522.29, "volume": 38845467, "ema_8": 522.13, "ema_21": 520.54, "sma_50": 518.22, "bb_upper": 534.9, "bb_middle": 518.7, "bb_lower": 502.49}, {"date": "2025-02-03", "open": 513.47, "high": 520.85, "low": 511.05, "close": 518.11, "volume": 40580835, "ema_8": 521.24, "ema_21": 520.32, "sma_50": 518.58, "bb_upper": 534.8, "bb_middle": 519.09, "bb_lower": 503.38}, {"date": "2025-02-04", "open": 518.63, "high": 525.11, "low": 518.23, "close": 524.47, "volume": 26046753, "ema_8": 521.96, "ema_21": 520.7, "sma_50": 519.0, "bb_upper": 535.27, "bb_middle": 519.38, "bb_lower": 503.49}, {"date": "2025-02-05", "open": 521.82, "high": 527.01, "low": 520.62, "close": 526.85, "volume": 21134070, "ema_8": 523.04, "ema_21": 521.26, "sma_50": 519.48, "bb_upper": 535.58, "bb_middle": 519.5, "bb_lower": 503.42}, {"date": "2025-02-06", "open": 527.36, "high": 529.81, "low": 525.74, "close": 529.6, "volume": 19434454, "ema_8": 524.5, "ema_21": 522.01, "sma_50": 519.97, "bb_upper": 536.77, "bb_middle": 520.22, "bb_lower": 503.67}, {"date": "2025-02-07", "open": 530.14, "high": 532.1, "low": 522.19, "close": 522.92, "volume": 29605470, "ema_8": 524.15, "ema_21": 522.1, "sma_50": 520.31, "bb_upper": 537.03, "bb_middle": 520.6, "bb_lower": 504.18}, {"date": "2025-02-10", "open": 527.22, "high": 530.36, "low": 526.75, "close": 529.25, "volume": 20852784, "ema_8": 525.28, "ema_21": 522.75, "sma_50": 520.76, "bb_upper": 537.28, "bb_middle": 521.71, "bb_lower": 506.14}, {"date": "2025-02-11", "open": 525.96, "high": 529.92, "low": 525.83, "close": 527.99, "volume": 19325500, "ema_8": 525.88, "ema_21": 523.22, "sma_50": 521.14, "bb_upper": 536.63, "bb_middle": 522.83, "bb_lower": 509.02}, {"date": "2025-02-12", "open": 522.3, "high": 529.19, "low": 521.95, "close": 528.3, "volume": 25009362, "ema_8": 526.42, "ema_21": 523.69, "sma_50": 521.6, "bb_upper": 535.16, "bb_middle": 523.99, "bb_lower": 512.81}, {"date": "2025-02-13", "open": 529.98, "high": 536.22, "low": 529.19, "close": 535.9, "volume": 28714799, "ema_8": 528.53, "ema_21": 524.8, "sma_50": 522.12, "bb_upper": 536.77, "bb_middle": 524.95, "bb_lower": 513.13}, {"date": "2025-02-14", "open": 536.0, "high": 538.84, "low": 535.67, "close": 538.15, "volume": 17862572, "ema_8": 530.67, "ema_21": 526.01, "sma_50": 522.58, "bb_upper": 538.04, "bb_middle": 526.2, "bb_lower": 514.37}, {"date": "2025-02-18", "open": 539.73, "high": 540.0, "low": 536.04, "close": 539.37, "volume": 20565028, "ema_8": 532.6, "ema_21": 527.22, "sma_50": 523.03, "bb_upper": 540.09, "bb_middle": 527.08, "bb_lower": 514.08}, {"date": "2025-02-19", "open": 538.57, "high": 540.81, "low": 536.46, "close": 539.52, "volume": 19666861, "ema_8": 534.14, "ema_21": 528.34, "sma_50": 523.35, "bb_upper": 541.9, "bb_middle": 527.82, "bb_lower": 513.74}, {"date": "2025-02-20", "open": 538.73, "high": 539.1, "low": 532.46, "close": 537.23, "volume": 26550753, "ema_8": 534.83, "ema_21": 529.15, "sma_50": 523.66, "bb_upper": 542.73, "bb_middle": 528.11, "bb_lower": 513.49}, {"date": "2025-02-21", "open": 538.38, "high": 538.4, "low": 525.71, "close": 526.08, "volume": 47093750, "ema_8": 532.88, "ema_21": 528.87, "sma_50": 523.65, "bb_upper": 542.26, "bb_middle": 527.78, "bb_lower": 513.29}, {"date": "2025-02-24", "open": 527.88, "high": 529.07, "low": 519.53, "close": 519.87, "volume": 39268392, "ema_8": 529.99, "ema_21": 528.05, "sma_50": 523.6, "bb_upper": 542.16, "bb_middle": 527.29, "bb_lower": 512.42}, {"date": "2025-02-25", "open": 519.24, "high": 519.32, "low": 509.44, "close": 513.32, "volume": 48940025, "ema_8": 526.29, "ema_21": 526.71, "sma_50": 523.46, "bb_upper": 542.29, "bb_middle": 527.25, "bb_lower": 512.2}, {"date": "2025-02-26", "open": 515.53, "high": 519.66, "low": 511.37, "close": 514.56, "volume": 34457618, "ema_8": 523.68, "ema_21": 525.61, "sma_50": 523.15, "bb_upper": 542.8, "bb_middle": 526.88, "bb_lower": 510.96}, {"date": "2025-02-27", "open": 518.13, "high": 519.07, "low": 500.05, "close": 500.27, "volume": 52447966, "ema_8": 518.48, "ema_21": 523.31, "sma_50": 522.63, "bb_upper": 545.61, "bb_middle": 525.86, "bb_lower": 506.1}, {"date": "2025-02-28", "open": 500.13, "high": 508.78, "low": 496.93, "close": 508.17, "volume": 47654043, "ema_8": 516.19, "ema_21": 521.93, "sma_50": 522.18, "bb_upper": 546.38, "bb_middle": 525.11, "bb_lower": 503.85}, {"date": "2025-03-03", "open": 511.52, "high": 513.04, "low": 493.58, "close": 497.05, "volume": 44587204, "ema_8": 511.93, "ema_21": 519.67, "sma_50": 521.36, "bb_upper": 548.54, "bb_middle": 523.85, "bb_lower": 499.16}, {"date": "2025-03-04", "open": 494.18, "high": 503.74, "low": 487.74, "close": 495.55, "volume": 67875402, "ema_8": 508.29, "ema_21": 517.47, "sma_50": 520.55, "bb_upper": 550.4, "bb_middle": 522.72, "bb_lower": 495.05}, {"date": "2025-03-05", "open": 496.2, "high": 503.63, "low": 491.26, "close": 502.01, "volume": 46323725, "ema_8": 506.9, "ema_21": 516.07, "sma_50": 520.26, "bb_upper": 550.76, "bb_middle": 521.6, "bb_lower": 492.44}, {"date": "2025-03-06", "open": 493.69, "high": 498.58, "low": 486.2, "close": 488.2, "volume": 57574332, "ema_8": 502.74, "ema_21": 513.54, "sma_50": 519.74, "bb_upper": 552.28, "bb_middle": 519.67, "bb_lower": 487.05}, {"date": "2025-03-07", "open": 487.16, "high": 493.28, "low": 480.53, "close": 491.79, "volume": 54714726, "ema_8": 500.31, "ema_21": 511.56, "sma_50": 519.21, "bb_upper": 552.29, "bb_middle": 517.77, "bb_lower": 483.26}, {"date": "2025-03-10", "open": 483.45, "high": 483.97, "low": 468.66, "close": 472.73, "volume": 76668029, "ema_8": 494.18, "ema_21": 508.03, "sma_50": 518.2, "bb_upper": 555.1, "bb_middle": 515.27, "bb_lower": 475.44}, {"date": "2025-03-11", "open": 472.35, "high": 478.81, "low": 467.01, "close": 471.6, "volume": 68760771, "ema_8": 489.16, "ema_21": 504.72, "sma_50": 517.04, "bb_upper": 556.11, "bb_middle": 512.38, "bb_lower": 468.66}, {"date": "2025-03-12", "open": 479.16, "high": 481.06, "low": 471.79, "close": 476.92, "volume": 46971082, "ema_8": 486.44, "ema_21": 502.19, "sma_50": 515.98, "bb_upper": 555.63, "bb_middle": 509.83, "bb_lower": 464.03}, {"date": "2025-03-13", "open": 476.25, "high": 476.28, "low": 466.43, "close": 468.34, "volume": 46563349, "ema_8": 482.42, "ema_21": 499.11, "sma_50": 514.9, "bb_upper": 555.31, "bb_middle": 506.83, "bb_lower": 458.35}, {"date": "2025-03-14", "open": 473.73, "high": 480.56, "low": 473.12, "close": 479.66, "volume": 43563010, "ema_8": 481.81, "ema_21": 497.34, "sma_50": 514.18, "bb_upper": 551.92, "bb_middle": 504.02, "bb_lower": 456.12}, {"date": "2025-03-17", "open": 479.61, "high": 485.84, "low": 477.8, "close": 482.77, "volume": 41744354, "ema_8": 482.02, "ema_21": 496.02, "sma_50": 513.61, "bb_upper": 547.21, "bb_middle": 501.25, "bb_lower": 455.29}, {"date": "2025-03-18", "open": 479.41, "high": 479.61, "low": 472.41, "close": 474.54, "volume": 39072265, "ema_8": 480.36, "ema_21": 494.07, "sma_50": 512.9, "bb_upper": 541.74, "bb_middle": 498.01, "bb_lower": 454.28}, {"date": "2025-03-19", "open": 476.81, "high": 485.33, "low": 474.87, "close": 480.89, "volume": 40430334, "ema_8": 480.48, "ema_21": 492.87, "sma_50": 512.14, "bb_upper": 534.76, "bb_middle": 495.08, "bb_lower": 455.39}, {"date": "2025-03-20", "open": 476.88, "high": 484.55, "low": 476.18, "close": 479.26, "volume": 36780549, "ema_8": 480.21, "ema_21": 491.63, "sma_50": 511.24, "bb_upper": 527.08, "bb_middle": 492.18, "bb_lower": 457.28}, {"date": "2025-03-21", "open": 474.08, "high": 481.61, "low": 472.9, "close": 480.84, "volume": 42234874, "ema_8": 480.35, "ema_21": 490.65, "sma_50": 510.55, "bb_upper": 521.25, "bb_middle": 489.92, "bb_lower": 458.58}, {"date": "2025-03-24", "open": 487.74, "high": 491.51, "low": 484.4, "close": 490.66, "volume": 34567186, "ema_8": 482.64, "ema_21": 490.65, "sma_50": 510.06, "bb_upper": 516.46, "bb_middle": 488.46, "bb_lower": 460.46}, {"date": "2025-03-25", "open": 491.39, "high": 493.62, "low": 490.42, "close": 493.46, "volume": 26035241, "ema_8": 485.04, "ema_21": 490.91, "sma_50": 509.78, "bb_upper": 513.06, "bb_middle": 487.46, "bb_lower": 461.87}, {"date": "2025-03-26", "open": 492.3, "high": 493.16, "low": 482.82, "close": 484.38, "volume": 35043357, "ema_8": 484.9, "ema_21": 490.31, "sma_50": 509.36, "bb_upper": 508.15, "bb_middle": 485.95, "bb_lower": 463.75}, {"date": "2025-03-27", "open": 482.41, "high": 486.58, "low": 480.25, "close": 481.62, "volume": 33469817, "ema_8": 484.17, "ema_21": 489.52, "sma_50": 508.89, "bb_upper": 506.23, "bb_middle": 485.02, "bb_lower": 463.81}, {"date": "2025-03-28", "open": 479.81, "high": 480.52, "low": 468.05, "close": 468.94, "volume": 46363797, "ema_8": 480.78, "ema_21": 487.65, "sma_50": 507.93, "bb_upper": 502.44, "bb_middle": 483.06, "bb_lower": 463.68}, {"date": "2025-03-31", "open": 461.92, "high": 469.86, "low": 457.33, "close": 468.92, "volume": 53000303, "ema_8": 478.15, "ema_21": 485.95, "sma_50": 507.05, "bb_upper": 500.84, "bb_middle": 481.65, "bb_lower": 462.47}, {"date": "2025-04-01", "open": 467.3, "high": 473.63, "low": 464.42, "close": 472.7, "volume": 41156226, "ema_8": 476.94, "ema_21": 484.74, "sma_50": 506.07, "bb_upper": 498.92, "bb_middle": 480.51, "bb_lower": 462.11}, {"date": "2025-04-02", "open": 466.12, "high": 479.56, "low": 465.86, "close": 476.15, "volume": 49894489, "ema_8": 476.76, "ema_21": 483.96, "sma_50": 505.1, "bb_upper": 494.66, "bb_middle": 479.22, "bb_lower": 463.78}, {"date": "2025-04-03", "open": 456.44, "high": 460.07, "low": 450.14, "close": 450.66, "volume": 70456338, "ema_8": 470.96, "ema_21": 480.94, "sma_50": 503.48, "bb_upper": 496.79, "bb_middle": 477.34, "bb_lower": 457.89}, {"date": "2025-04-04", "open": 438.14, "high": 440.37, "low": 422.67, "close": 422.67, "volume": 117088441, "ema_8": 460.23, "ema_21": 475.64, "sma_50": 501.28, "bb_upper": 504.11, "bb_middle": 473.89, "bb_lower": 443.66}, {"date": "2025-04-07", "open": 408.66, "high": 443.14, "low": 402.39, "close": 423.69, "volume": 161556970, "ema_8": 452.11, "ema_21": 470.92, "sma_50": 499.16, "bb_upper": 509.09, "bb_middle": 471.43, "bb_lower": 433.78}, {"date": "2025-04-08", "open": 438.16, "high": 443.14, "low": 409.79, "close": 416.06, "volume": 101248060, "ema_8": 444.1, "ema_21": 465.93, "sma_50": 497.2, "bb_upper": 513.73, "bb_middle": 468.66, "bb_lower": 423.59}, {"date": "2025-04-09", "open": 415.57, "high": 467.83, "low": 415.43, "close": 466.0, "volume": 142876878, "ema_8": 448.97, "ema_21": 465.94, "sma_50": 496.08, "bb_upper": 513.02, "bb_middle": 468.11, "bb_lower": 423.2}]};
        const spyScorecardData = {"v1_scorecard": [{"date": "2025-01-24", "value": 6}, {"date": "2025-01-27", "value": 5}, {"date": "2025-01-28", "value": 4}, {"date": "2025-01-29", "value": 5}, {"date": "2025-01-30", "value": 5}, {"date": "2025-01-31", "value": 5}, {"date": "2025-02-03", "value": 4}, {"date": "2025-02-04", "value": 4}, {"date": "2025-02-05", "value": 4}, {"date": "2025-02-06", "value": 4}, {"date": "2025-02-07", "value": 5}, {"date": "2025-02-10", "value": 5}, {"date": "2025-02-11", "value": 5}, {"date": "2025-02-12", "value": 5}, {"date": "2025-02-13", "value": 5}, {"date": "2025-02-14", "value": 6}, {"date": "2025-02-18", "value": 5}, {"date": "2025-02-19", "value": 5}, {"date": "2025-02-20", "value": 4}, {"date": "2025-02-21", "value": 4}, {"date": "2025-02-24", "value": 3}, {"date": "2025-02-25", "value": 3}, {"date": "2025-02-26", "value": 3}, {"date": "2025-02-27", "value": 2}, {"date": "2025-02-28", "value": 4}, {"date": "2025-03-03", "value": 3}, {"date": "2025-03-04", "value": 2}, {"date": "2025-03-05", "value": 2}, {"date": "2025-03-06", "value": 2}, {"date": "2025-03-07", "value": 0}, {"date": "2025-03-10", "value": 0}, {"date": "2025-03-11", "value": 0}, {"date": "2025-03-12", "value": 0}, {"date": "2025-03-13", "value": 0}, {"date": "2025-03-14", "value": 0}, {"date": "2025-03-17", "value": 0}, {"date": "2025-03-18", "value": 0}, {"date": "2025-03-19", "value": 1}, {"date": "2025-03-20", "value": 1}, {"date": "2025-03-21", "value": 0}, {"date": "2025-03-24", "value": 0}, {"date": "2025-03-25", "value": 1}, {"date": "2025-03-26", "value": 0}, {"date": "2025-03-27", "value": 1}, {"date": "2025-03-28", "value": 0}, {"date": "2025-03-31", "value": 0}, {"date": "2025-04-01", "value": 0}, {"date": "2025-04-02", "value": 0}, {"date": "2025-04-03", "value": 1}, {"date": "2025-04-04", "value": 0}, {"date": "2025-04-07", "value": 0}, {"date": "2025-04-08", "value": 0}, {"date": "2025-04-09", "value": 0}], "v2_scorecard": [{"date": "2025-01-24", "value": 6}, {"date": "2025-01-27", "value": 2}, {"date": "2025-01-28", "value": 4}, {"date": "2025-01-29", "value": 3}, {"date": "2025-01-30", "value": 3}, {"date": "2025-01-31", "value": 3}, {"date": "2025-02-03", "value": 1}, {"date": "2025-02-04", "value": 4}, {"date": "2025-02-05", "value": 6}, {"date": "2025-02-06", "value": 6}, {"date": "2025-02-07", "value": 5}, {"date": "2025-02-10", "value": 6}, {"date": "2025-02-11", "value": 6}, {"date": "2025-02-12", "value": 6}, {"date": "2025-02-13", "value": 6}, {"date": "2025-02-14", "value": 6}, {"date": "2025-02-18", "value": 6}, {"date": "2025-02-19", "value": 6}, {"date": "2025-02-20", "value": 6}, {"date": "2025-02-21", "value": 3}, {"date": "2025-02-24", "value": 2}, {"date": "2025-02-25", "value": 2}, {"date": "2025-02-26", "value": 3}, {"date": "2025-02-27", "value": 3}, {"date": "2025-02-28", "value": 2}, {"date": "2025-03-03", "value": 3}, {"date": "2025-03-04", "value": 3}, {"date": "2025-03-05", "value": 2}, {"date": "2025-03-06", "value": 2}, {"date": "2025-03-07", "value": 2}, {"date": "2025-03-10", "value": 2}, {"date": "2025-03-11", "value": 2}, {"date": "2025-03-12", "value": 3}, {"date": "2025-03-13", "value": 3}, {"date": "2025-03-14", "value": 3}, {"date": "2025-03-17", "value": 2}, {"date": "2025-03-18", "value": 2}, {"date": "2025-03-19", "value": 3}, {"date": "2025-03-20", "value": 3}, {"date": "2025-03-21", "value": 3}, {"date": "2025-03-24", "value": 4}, {"date": "2025-03-25", "value": 4}, {"date": "2025-03-26", "value": 4}, {"date": "2025-03-27", "value": 1}, {"date": "2025-03-28", "value": 2}, {"date": "2025-03-31", "value": 1}, {"date": "2025-04-01", "value": 1}, {"date": "2025-04-02", "value": 1}, {"date": "2025-04-03", "value": 1}, {"date": "2025-04-04", "value": 1}, {"date": "2025-04-07", "value": 1}, {"date": "2025-04-08", "value": 2}, {"date": "2025-04-09", "value": 3}]};
        const qqqScorecardData = {"v1_scorecard": [{"date": "2025-01-24", "value": 6}, {"date": "2025-01-27", "value": 5}, {"date": "2025-01-28", "value": 4}, {"date": "2025-01-29", "value": 5}, {"date": "2025-01-30", "value": 5}, {"date": "2025-01-31", "value": 5}, {"date": "2025-02-03", "value": 4}, {"date": "2025-02-04", "value": 4}, {"date": "2025-02-05", "value": 4}, {"date": "2025-02-06", "value": 4}, {"date": "2025-02-07", "value": 5}, {"date": "2025-02-10", "value": 5}, {"date": "2025-02-11", "value": 5}, {"date": "2025-02-12", "value": 5}, {"date": "2025-02-13", "value": 5}, {"date": "2025-02-14", "value": 6}, {"date": "2025-02-18", "value": 5}, {"date": "2025-02-19", "value": 5}, {"date": "2025-02-20", "value": 4}, {"date": "2025-02-21", "value": 4}, {"date": "2025-02-24", "value": 3}, {"date": "2025-02-25", "value": 3}, {"date": "2025-02-26", "value": 3}, {"date": "2025-02-27", "value": 2}, {"date": "2025-02-28", "value": 4}, {"date": "2025-03-03", "value": 3}, {"date": "2025-03-04", "value": 2}, {"date": "2025-03-05", "value": 2}, {"date": "2025-03-06", "value": 2}, {"date": "2025-03-07", "value": 0}, {"date": "2025-03-10", "value": 0}, {"date": "2025-03-11", "value": 0}, {"date": "2025-03-12", "value": 0}, {"date": "2025-03-13", "value": 0}, {"date": "2025-03-14", "value": 0}, {"date": "2025-03-17", "value": 0}, {"date": "2025-03-18", "value": 0}, {"date": "2025-03-19", "value": 1}, {"date": "2025-03-20", "value": 1}, {"date": "2025-03-21", "value": 0}, {"date": "2025-03-24", "value": 0}, {"date": "2025-03-25", "value": 1}, {"date": "2025-03-26", "value": 0}, {"date": "2025-03-27", "value": 1}, {"date": "2025-03-28", "value": 0}, {"date": "2025-03-31", "value": 0}, {"date": "2025-04-01", "value": 0}, {"date": "2025-04-02", "value": 0}, {"date": "2025-04-03", "value": 1}, {"date": "2025-04-04", "value": 0}, {"date": "2025-04-07", "value": 0}, {"date": "2025-04-08", "value": 0}, {"date": "2025-04-09", "value": 0}], "v2_scorecard": [{"date": "2025-01-24", "value": 6}, {"date": "2025-01-27", "value": 2}, {"date": "2025-01-28", "value": 4}, {"date": "2025-01-29", "value": 3}, {"date": "2025-01-30", "value": 3}, {"date": "2025-01-31", "value": 3}, {"date": "2025-02-03", "value": 1}, {"date": "2025-02-04", "value": 4}, {"date": "2025-02-05", "value": 6}, {"date": "2025-02-06", "value": 6}, {"date": "2025-02-07", "value": 5}, {"date": "2025-02-10", "value": 6}, {"date": "2025-02-11", "value": 6}, {"date": "2025-02-12", "value": 6}, {"date": "2025-02-13", "value": 6}, {"date": "2025-02-14", "value": 6}, {"date": "2025-02-18", "value": 6}, {"date": "2025-02-19", "value": 6}, {"date": "2025-02-20", "value": 6}, {"date": "2025-02-21", "value": 3}, {"date": "2025-02-24", "value": 2}, {"date": "2025-02-25", "value": 2}, {"date": "2025-02-26", "value": 3}, {"date": "2025-02-27", "value": 3}, {"date": "2025-02-28", "value": 2}, {"date": "2025-03-03", "value": 3}, {"date": "2025-03-04", "value": 3}, {"date": "2025-03-05", "value": 2}, {"date": "2025-03-06", "value": 2}, {"date": "2025-03-07", "value": 2}, {"date": "2025-03-10", "value": 2}, {"date": "2025-03-11", "value": 2}, {"date": "2025-03-12", "value": 3}, {"date": "2025-03-13", "value": 3}, {"date": "2025-03-14", "value": 3}, {"date": "2025-03-17", "value": 2}, {"date": "2025-03-18", "value": 2}, {"date": "2025-03-19", "value": 3}, {"date": "2025-03-20", "value": 3}, {"date": "2025-03-21", "value": 3}, {"date": "2025-03-24", "value": 4}, {"date": "2025-03-25", "value": 4}, {"date": "2025-03-26", "value": 4}, {"date": "2025-03-27", "value": 1}, {"date": "2025-03-28", "value": 2}, {"date": "2025-03-31", "value": 1}, {"date": "2025-04-01", "value": 1}, {"date": "2025-04-02", "value": 1}, {"date": "2025-04-03", "value": 1}, {"date": "2025-04-04", "value": 1}, {"date": "2025-04-07", "value": 1}, {"date": "2025-04-08", "value": 2}, {"date": "2025-04-09", "value": 3}]};
        // TradingView-style color scheme
        const COLORS = {
            bg: '#1a1a1a',
            grid: '#333333',
            text: '#ffffff',
            green: '#26A69A',
            red: '#EF5350',
            volume: '#434651',
            ema8: '#B0B0B0',     // Light gray
            ema21: '#D8BFD8',    // Light purple
            sma50: '#FFEB3B',
            bb_upper: '#4CAF50',
            bb_middle: '#2196F3',
            bb_lower: '#F44336',
            v1_scorecard: '#2196F3',
            v2_scorecard: '#9C27B0'
        };
        class CandlestickChart {
            constructor(containerId, data, scorecardData) {
                this.container = document.getElementById(containerId);
                this.data = data;
                this.scorecardData = scorecardData;
                this.width = this.container.clientWidth;
                this.height = this.container.clientHeight || 640;
                this.margin = { top: 10, right: 10, bottom: 30, left: 10 };
                this.chartWidth = this.width - this.margin.left - this.margin.right;
                this.chartHeight = this.height - this.margin.top - this.margin.bottom;
                this.setupScales();
                this.render();
            }
            setupScales() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    return;
                }
                const prices = this.data.data;
                const priceRange = this.getPriceRange(prices);
                const volumeRange = this.getVolumeRange(prices);
                this.xScale = (i) => (i / (prices.length - 1)) * this.chartWidth;
                this.yScale = (price) => this.chartHeight * 0.7 * (1 - (price - priceRange.min) / (priceRange.max - priceRange.min));
                this.volumeScale = (volume) => (this.chartHeight * 0.25) * (volume / volumeRange.max);
            }
            getPriceRange(prices) {
                const allPrices = [];
                prices.forEach(p => {
                    allPrices.push(p.high, p.low, p.open, p.close);
                    if (p.ema_8) allPrices.push(p.ema_8);
                    if (p.ema_21) allPrices.push(p.ema_21);
                    if (p.sma_50) allPrices.push(p.sma_50);
                    if (p.bb_upper) allPrices.push(p.bb_upper);
                    if (p.bb_lower) allPrices.push(p.bb_lower);
                });
                return { min: Math.min(...allPrices), max: Math.max(...allPrices) };
            }
            
            getVolumeRange(prices) {
                const volumes = prices.map(p => p.volume);
                return { min: Math.min(...volumes), max: Math.max(...volumes) };
            }
            
            render() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    this.container.innerHTML = '<div style="color: white; text-align: center; padding: 50px;">No chart data available</div>';
                    return;
                }
                
                    // Create SVG with fixed pixel width for proper alignment
                    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svg.setAttribute('width', `${this.width}`);
                    svg.setAttribute('height', `${this.height}`);
                    svg.style.backgroundColor = COLORS.bg;
                    svg.style.display = 'block';
                    svg.style.margin = '0 auto';
                
                // Create tooltip element
                this.tooltip = document.createElement('div');
                this.tooltip.style.cssText = `
                    position: absolute;
                    background: rgba(0,0,0,0.92);
                    color: #fff;
                    padding: 7px 12px;
                    border-radius: 5px;
                    font-size: 13px;
                    pointer-events: none;
                    opacity: 0;
                    z-index: 1000;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                    transition: opacity 0.2s;
                    white-space: pre;
                `;
                this.container.style.position = 'relative';
                
                // Create main chart group
                const chartGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                chartGroup.setAttribute('transform', `translate(${this.margin.left}, ${this.margin.top})`);
                
                // Draw grid
                this.drawGrid(chartGroup);
                
                // Draw Bollinger Bands
                this.drawBollingerBands(chartGroup);
                
                // Draw moving averages
                this.drawMovingAverages(chartGroup);
                
                // Draw candlesticks
                this.drawCandlesticks(chartGroup);
                
                // Draw volume
                this.drawVolume(chartGroup);
                
                // Draw scorecard overlays
                this.drawScorecardOverlays(chartGroup);
                
                // Draw axes
                this.drawAxes(chartGroup);
                
                // Draw legend
                this.drawLegend(chartGroup);
                
                svg.appendChild(chartGroup);
                this.container.innerHTML = '';
                this.container.appendChild(this.tooltip);
                this.container.appendChild(svg);
            }
            
            drawGrid(group) {
                // Horizontal grid lines
                for (let i = 0; i <= 10; i++) {
                    const y = (i / 10) * this.chartHeight * 0.7;
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', 0);
                    line.setAttribute('x2', this.chartWidth);
                    line.setAttribute('y1', y);
                    line.setAttribute('y2', y);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }
                
                // Vertical grid lines  
                const dataLength = this.data.data.length;
                for (let i = 0; i < dataLength; i += Math.floor(dataLength / 6)) {
                    const x = this.xScale(i);
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x);
                    line.setAttribute('x2', x);
                    line.setAttribute('y1', 0);
                    line.setAttribute('y2', this.chartHeight);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }
            }
            
            drawCandlesticks(group) {
                this.data.data.forEach((candle, i) => {
                    const x = this.xScale(i);
                    const candleWidth = Math.max(1, this.chartWidth / this.data.data.length * 0.8);
                    
                    const openY = this.yScale(candle.open);
                    const closeY = this.yScale(candle.close);
                    const highY = this.yScale(candle.high);
                    const lowY = this.yScale(candle.low);
                    
                    const isGreen = candle.close >= candle.open;
                    const color = isGreen ? COLORS.green : COLORS.red;
                    
                    // Create a group for each candlestick to handle hover events
                    const candleGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                    candleGroup.style.cursor = 'pointer';
                    
                    // Draw high-low line
                    const wickLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    wickLine.setAttribute('x1', x);
                    wickLine.setAttribute('x2', x);
                    wickLine.setAttribute('y1', highY);
                    wickLine.setAttribute('y2', lowY);
                    wickLine.setAttribute('stroke', color);
                    wickLine.setAttribute('stroke-width', 1);
                    candleGroup.appendChild(wickLine);
                    
                    // Draw body
                    const bodyHeight = Math.abs(closeY - openY);
                    const bodyY = Math.min(openY, closeY);
                    
                    const body = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    body.setAttribute('x', x - candleWidth/2);
                    body.setAttribute('y', bodyY);
                    body.setAttribute('width', candleWidth);
                    body.setAttribute('height', Math.max(1, bodyHeight));
                    body.setAttribute('fill', color);  // Always fill with color
                    body.setAttribute('stroke', color);
                    body.setAttribute('stroke-width', 1);
                    candleGroup.appendChild(body);
                    
                    // Add invisible hover area for better mouse interaction
                    const hoverArea = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    hoverArea.setAttribute('x', x - candleWidth/2 - 2);
                    hoverArea.setAttribute('y', Math.min(highY, lowY));
                    hoverArea.setAttribute('width', candleWidth + 4);
                    hoverArea.setAttribute('height', Math.abs(highY - lowY) + 4);
                    hoverArea.setAttribute('fill', 'transparent');
                    candleGroup.appendChild(hoverArea);
                    
                    // Add hover event listeners
                    candleGroup.addEventListener('mouseenter', (e) => {
                        this.showTooltip(e, candle);
                    });
                    candleGroup.addEventListener('mouseleave', () => {
                        this.hideTooltip();
                    });
                    candleGroup.addEventListener('mousemove', (e) => {
                        this.updateTooltipPosition(e);
                    });
                    
                    group.appendChild(candleGroup);
                });
            }
            
            drawVolume(group) {
                const volumeBase = this.chartHeight * 0.75;
                this.data.data.forEach((candle, i) => {
                    const x = this.xScale(i);
                    const barWidth = Math.max(1, this.chartWidth / this.data.data.length * 0.8);
                    const barHeight = this.volumeScale(candle.volume);
                    
                    const bar = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    bar.setAttribute('x', x - barWidth/2);
                    bar.setAttribute('y', volumeBase);
                    bar.setAttribute('width', barWidth);
                    bar.setAttribute('height', barHeight);
                    bar.setAttribute('fill', COLORS.volume);
                    bar.setAttribute('opacity', 0.6);
                    group.appendChild(bar);
                });
            }
            
            drawMovingAverages(group) {
                this.drawLine(group, 'ema_8', COLORS.ema8, 2, 1, '5,5');    // Dashed light gray
                this.drawLine(group, 'ema_21', COLORS.ema21, 2, 1, '5,5');  // Dashed light purple
                this.drawLine(group, 'sma_50', COLORS.sma50, 2);             // Solid yellow
            }
            
            drawBollingerBands(group) {
                this.drawLine(group, 'bb_upper', COLORS.bb_upper, 1, 0.6);
                this.drawLine(group, 'bb_middle', COLORS.bb_middle, 1, 0.6);
                this.drawLine(group, 'bb_lower', COLORS.bb_lower, 1, 0.6);
            }
            
            drawLine(group, field, color, strokeWidth = 1, opacity = 1, dashArray = null) {
                const points = [];
                this.data.data.forEach((candle, i) => {
                    if (candle[field] !== null && candle[field] !== undefined) {
                        const x = this.xScale(i);
                        const y = this.yScale(candle[field]);
                        points.push(`${x},${y}`);
                    }
                });
                
                if (points.length > 1) {
                    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                    polyline.setAttribute('points', points.join(' '));
                    polyline.setAttribute('fill', 'none');
                    polyline.setAttribute('stroke', color);
                    polyline.setAttribute('stroke-width', strokeWidth);
                    polyline.setAttribute('opacity', opacity);
                    if (dashArray) {
                        polyline.setAttribute('stroke-dasharray', dashArray);
                    }
                    group.appendChild(polyline);
                }
            }
            
            drawScorecardOverlays(group) {
                if (this.scorecardData && this.scorecardData.v1_scorecard) {
                    this.drawScorecardLine(group, this.scorecardData.v1_scorecard, COLORS.v1_scorecard);
                }
                if (this.scorecardData && this.scorecardData.v2_scorecard) {
                    this.drawScorecardLine(group, this.scorecardData.v2_scorecard, COLORS.v2_scorecard);
                }
            }
            
            drawScorecardLine(group, scorecardData, color) {
                // Map scorecard data to chart dates
                const scoreByDate = {};
                scorecardData.forEach(item => {
                    scoreByDate[item.date] = item.value;
                });

                // Scale scores to chart height using fixed 0-9 range for both V1 and V2
                const scaleScore = (score) => this.chartHeight * 0.7 * (1 - score / 9);

                const points = [];
                this.data.data.forEach((candle, i) => {
                    const score = scoreByDate[candle.date];
                    if (score !== undefined) {
                        const x = this.xScale(i);
                        const y = scaleScore(score);
                        points.push(`${x},${y}`);
                    }
                });

                if (points.length > 1) {
                    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                    polyline.setAttribute('points', points.join(' '));
                    polyline.setAttribute('fill', 'none');
                    polyline.setAttribute('stroke', color);
                    polyline.setAttribute('stroke-width', 3);
                    polyline.setAttribute('opacity', 0.8);
                    group.appendChild(polyline);
                }
            }
            
            drawAxes(group) {
                // Draw scorecard y-axis labels (0-9 range on the right side)
                const scorecardYAxisX = this.chartWidth + 5;
                for (let i = 0; i <= 9; i++) {
                    const y = this.chartHeight * 0.7 * (1 - i / 9);

                    // Add tick mark
                    const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    tick.setAttribute('x1', this.chartWidth);
                    tick.setAttribute('x2', this.chartWidth + 3);
                    tick.setAttribute('y1', y);
                    tick.setAttribute('y2', y);
                    tick.setAttribute('stroke', COLORS.text);
                    tick.setAttribute('stroke-width', 1);
                    group.appendChild(tick);

                    // Add label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', scorecardYAxisX);
                    text.setAttribute('y', y + 4);
                    text.setAttribute('font-family', 'Arial, sans-serif');
                    text.setAttribute('font-size', '10');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = i.toString();
                    group.appendChild(text);
                }
            }
            
            drawLegend(group) {
                // Legend items with colors and labels
                const legendItems = [
                    { label: 'Candlesticks: Green=Up, Red=Down', color: COLORS.green },
                    { label: '8 EMA', color: COLORS.ema8 },
                    { label: '21 EMA', color: COLORS.ema21 },
                    { label: '50 SMA', color: COLORS.sma50 },
                    { label: 'BB Upper', color: COLORS.bb_upper },
                    { label: 'BB Middle', color: COLORS.bb_middle },
                    { label: 'BB Lower', color: COLORS.bb_lower },
                    { label: 'V1 Scorecard', color: COLORS.v1_scorecard },
                    { label: 'V2 Scorecard', color: COLORS.v2_scorecard }
                ];
                
                const legendX = 10;
                const legendY = 10;
                const itemHeight = 14;
                
                // Create legend background
                const legendBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                legendBg.setAttribute('x', legendX - 5);
                legendBg.setAttribute('y', legendY - 5);
                legendBg.setAttribute('width', 200);
                legendBg.setAttribute('height', legendItems.length * itemHeight + 10);
                legendBg.setAttribute('fill', COLORS.bg);
                legendBg.setAttribute('stroke', COLORS.grid);
                legendBg.setAttribute('stroke-width', 1);
                legendBg.setAttribute('opacity', 0.9);
                group.appendChild(legendBg);
                
                // Add legend items
                legendItems.forEach((item, index) => {
                    const y = legendY + (index * itemHeight);
                    
                    // Color line
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', legendX);
                    line.setAttribute('x2', legendX + 15);
                    line.setAttribute('y1', y + 5);
                    line.setAttribute('y2', y + 5);
                    line.setAttribute('stroke', item.color);
                    line.setAttribute('stroke-width', 2);
                    group.appendChild(line);
                    
                    // Label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', legendX + 20);
                    text.setAttribute('y', y + 8);
                    text.setAttribute('font-family', 'Arial, sans-serif');
                    text.setAttribute('font-size', '10');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = item.label;
                    group.appendChild(text);
                });
            }
            
            showTooltip(event, candle) {
                if (!candle) return;

                // Format volume with commas
                const formatVolume = (vol) => {
                    return vol.toLocaleString('en-US');
                };

                // Format price to 2 decimal places
                const formatPrice = (price) => {
                    return price.toFixed(2);
                };

                // Get scorecard values for this date
                let v1Score = 'N/A';
                let v2Score = 'N/A';

                if (this.scorecardData) {
                    if (this.scorecardData.v1_scorecard) {
                        const v1Item = this.scorecardData.v1_scorecard.find(item => item.date === candle.date);
                        if (v1Item) v1Score = v1Item.value;
                    }
                    if (this.scorecardData.v2_scorecard) {
                        const v2Item = this.scorecardData.v2_scorecard.find(item => item.date === candle.date);
                        if (v2Item) v2Score = v2Item.value;
                    }
                }

                // Build tooltip text
                let tooltipText = `Date: ${candle.date}\n`;
                tooltipText += `Open: ${formatPrice(candle.open)}\n`;
                tooltipText += `High: ${formatPrice(candle.high)}\n`;
                tooltipText += `Low: ${formatPrice(candle.low)}\n`;
                tooltipText += `Close: ${formatPrice(candle.close)}\n`;
                tooltipText += `Volume: ${formatVolume(candle.volume)}\n`;
                tooltipText += `V1 Score: ${v1Score}\n`;
                tooltipText += `V2 Score: ${v2Score}`;

                this.tooltip.textContent = tooltipText;
                this.tooltip.style.opacity = '1';
                this.updateTooltipPosition(event);
            }
            
            hideTooltip() {
                this.tooltip.style.opacity = '0';
            }
            
            updateTooltipPosition(event) {
                const containerRect = this.container.getBoundingClientRect();
                const x = event.clientX - containerRect.left + 10;
                const y = event.clientY - containerRect.top - 10;
                
                this.tooltip.style.left = x + 'px';
                this.tooltip.style.top = y + 'px';
            }
        }
        
        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            new CandlestickChart('spy-chart', spyData, spyScorecardData);
            new CandlestickChart('qqq-chart', qqqData, qqqScorecardData);
        });
    </script>
</body>
</html>
